[{
  'timestamp': 1641760589527,
  'message': 'START RequestId: a683e0f3-4f7d-523f-8c21-baa606068600 Version: $LATEST\n',
  'ingestionTime': 1641760598610
}, {
  'timestamp': 1641760589532,
  'message': '{"level":"INFO","location":"lambda_handler:137","message":"Attempting to validate change_event: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 20:36:29,532+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":true,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"a683e0f3-4f7d-523f-8c21-baa606068600","xray_trace_id":"1-61db474d-b8aeeb71fd5192ea3ece3fae"}\n',
  'ingestionTime': 1641760598610
}, {
  'timestamp': 1641760589532,
  'message': '{"level":"INFO","location":"validate_event:17","message":"Attempting to validate event payload: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 20:36:29,532+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":true,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"a683e0f3-4f7d-523f-8c21-baa606068600","xray_trace_id":"1-61db474d-b8aeeb71fd5192ea3ece3fae"}\n',
  'ingestionTime': 1641760598610
}, {
  'timestamp': 1641760589545,
  'message': '{"level":"ERROR","location":"validate_event:21","message":"Input schema validation error|Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","timestamp":"2022-01-09 20:36:29,534+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":true,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"a683e0f3-4f7d-523f-8c21-baa606068600","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","exception_name":"SchemaValidationError","xray_trace_id":"1-61db474d-b8aeeb71fd5192ea3ece3fae"}\n',
  'ingestionTime': 1641760598610
}, {
  'timestamp': 1641760589545,
  'message': '{"level":"ERROR","location":"unhandled_exception_logging:15","message":"Something went wrong","timestamp":"2022-01-09 20:36:29,545+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":true,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"a683e0f3-4f7d-523f-8c21-baa606068600","error":"Change Event malformed, validation failed","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/common/middlewares.py\\", line 12, in unhandled_exception_logging\\n    response = handler(event, context)\\n  File \\"/var/task/event_processor.py\\", line 138, in lambda_handler\\n    validate_event(change_event)\\n  File \\"/var/task/change_event_validation.py\\", line 22, in validate_event\\n    raise ValidationException(\\"Change Event malformed, validation failed\\")\\nchange_event_exceptions.ValidationException: Change Event malformed, validation failed","exception_name":"ValidationException","xray_trace_id":"1-61db474d-b8aeeb71fd5192ea3ece3fae"}\n',
  'ingestionTime': 1641760598610
}, {
  'timestamp': 1641760589565,
  'message': '[ERROR] ValidationException: Change Event malformed, validation failed\rTraceback (most recent call last):\r\xa0\xa0File "/var/task/aws_lambda_powertools/tracing/tracer.py", line 315, in decorate\r\xa0\xa0\xa0\xa0response = lambda_handler(event, context, **kwargs)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/aws_lambda_powertools/utilities/data_classes/event_source.py", line 39, in event_source\r\xa0\xa0\xa0\xa0return handler(data_class(event), context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 23, in set_correlation_id\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/logging/logger.py", line 354, in decorate\r\xa0\xa0\xa0\xa0return lambda_handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 12, in unhandled_exception_logging\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/event_processor.py", line 138, in lambda_handler\r\xa0\xa0\xa0\xa0validate_event(change_event)\r\xa0\xa0File "/var/task/change_event_validation.py", line 22, in validate_event\r\xa0\xa0\xa0\xa0raise ValidationException("Change Event malformed, validation failed")\n',
  'ingestionTime': 1641760598610
}, {
  'timestamp': 1641760589566,
  'message': 'END RequestId: a683e0f3-4f7d-523f-8c21-baa606068600\n',
  'ingestionTime': 1641760598610
}, {
  'timestamp': 1641760589566,
  'message': 'REPORT RequestId: a683e0f3-4f7d-523f-8c21-baa606068600\tDuration: 35.44 ms\tBilled Duration: 554 ms\tMemory Size: 256 MB\tMax Memory Used: 76 MB\tInit Duration: 517.72 ms\t\nXRAY TraceId: 1-61db474d-b8aeeb71fd5192ea3ece3fae\tSegmentId: 4a7e03a67a883ee1\tSampled: true\t\n',
  'ingestionTime': 1641760598610
}, {
  'timestamp': 1641760709515,
  'message': 'START RequestId: 48f04a34-1922-5c25-8435-106150d1b81a Version: $LATEST\n',
  'ingestionTime': 1641760718535
}, {
  'timestamp': 1641760709519,
  'message': '{"level":"INFO","location":"lambda_handler:137","message":"Attempting to validate change_event: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 20:38:29,519+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"48f04a34-1922-5c25-8435-106150d1b81a","xray_trace_id":"1-61db47c5-87001f9d1a924c11c90a8dfa"}\n',
  'ingestionTime': 1641760718535
}, {
  'timestamp': 1641760709519,
  'message': '{"level":"INFO","location":"validate_event:17","message":"Attempting to validate event payload: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 20:38:29,519+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"48f04a34-1922-5c25-8435-106150d1b81a","xray_trace_id":"1-61db47c5-87001f9d1a924c11c90a8dfa"}\n',
  'ingestionTime': 1641760718535
}, {
  'timestamp': 1641760709520,
  'message': '{"level":"ERROR","location":"validate_event:21","message":"Input schema validation error|Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","timestamp":"2022-01-09 20:38:29,520+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"48f04a34-1922-5c25-8435-106150d1b81a","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","exception_name":"SchemaValidationError","xray_trace_id":"1-61db47c5-87001f9d1a924c11c90a8dfa"}\n',
  'ingestionTime': 1641760718535
}, {
  'timestamp': 1641760709521,
  'message': '{"level":"ERROR","location":"unhandled_exception_logging:15","message":"Something went wrong","timestamp":"2022-01-09 20:38:29,520+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"48f04a34-1922-5c25-8435-106150d1b81a","error":"Change Event malformed, validation failed","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/common/middlewares.py\\", line 12, in unhandled_exception_logging\\n    response = handler(event, context)\\n  File \\"/var/task/event_processor.py\\", line 138, in lambda_handler\\n    validate_event(change_event)\\n  File \\"/var/task/change_event_validation.py\\", line 22, in validate_event\\n    raise ValidationException(\\"Change Event malformed, validation failed\\")\\nchange_event_exceptions.ValidationException: Change Event malformed, validation failed","exception_name":"ValidationException","xray_trace_id":"1-61db47c5-87001f9d1a924c11c90a8dfa"}\n',
  'ingestionTime': 1641760718535
}, {
  'timestamp': 1641760709522,
  'message': '[ERROR] ValidationException: Change Event malformed, validation failed\rTraceback (most recent call last):\r\xa0\xa0File "/var/task/aws_lambda_powertools/tracing/tracer.py", line 315, in decorate\r\xa0\xa0\xa0\xa0response = lambda_handler(event, context, **kwargs)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/aws_lambda_powertools/utilities/data_classes/event_source.py", line 39, in event_source\r\xa0\xa0\xa0\xa0return handler(data_class(event), context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 23, in set_correlation_id\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/logging/logger.py", line 354, in decorate\r\xa0\xa0\xa0\xa0return lambda_handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 12, in unhandled_exception_logging\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/event_processor.py", line 138, in lambda_handler\r\xa0\xa0\xa0\xa0validate_event(change_event)\r\xa0\xa0File "/var/task/change_event_validation.py", line 22, in validate_event\r\xa0\xa0\xa0\xa0raise ValidationException("Change Event malformed, validation failed")\n',
  'ingestionTime': 1641760718535
}, {
  'timestamp': 1641760709527,
  'message': 'END RequestId: 48f04a34-1922-5c25-8435-106150d1b81a\n',
  'ingestionTime': 1641760718535
}, {
  'timestamp': 1641760709527,
  'message': 'REPORT RequestId: 48f04a34-1922-5c25-8435-106150d1b81a\tDuration: 9.16 ms\tBilled Duration: 10 ms\tMemory Size: 256 MB\tMax Memory Used: 76 MB\t\nXRAY TraceId: 1-61db47c5-87001f9d1a924c11c90a8dfa\tSegmentId: 3ef8bf95476f0f78\tSampled: true\t\n',
  'ingestionTime': 1641760718535
}, {
  'timestamp': 1641760828721,
  'message': 'START RequestId: b00ac6cf-92a8-59d4-8e22-9c9ad8c37b29 Version: $LATEST\n',
  'ingestionTime': 1641760837741
}, {
  'timestamp': 1641760828726,
  'message': '{"level":"INFO","location":"lambda_handler:137","message":"Attempting to validate change_event: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 20:40:28,726+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"b00ac6cf-92a8-59d4-8e22-9c9ad8c37b29","xray_trace_id":"1-61db483c-936468784dd81f5a7fd9f00f"}\n',
  'ingestionTime': 1641760837741
}, {
  'timestamp': 1641760828726,
  'message': '{"level":"INFO","location":"validate_event:17","message":"Attempting to validate event payload: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 20:40:28,726+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"b00ac6cf-92a8-59d4-8e22-9c9ad8c37b29","xray_trace_id":"1-61db483c-936468784dd81f5a7fd9f00f"}\n',
  'ingestionTime': 1641760837741
}, {
  'timestamp': 1641760828727,
  'message': '{"level":"ERROR","location":"validate_event:21","message":"Input schema validation error|Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","timestamp":"2022-01-09 20:40:28,727+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"b00ac6cf-92a8-59d4-8e22-9c9ad8c37b29","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","exception_name":"SchemaValidationError","xray_trace_id":"1-61db483c-936468784dd81f5a7fd9f00f"}\n',
  'ingestionTime': 1641760837741
}, {
  'timestamp': 1641760828728,
  'message': '{"level":"ERROR","location":"unhandled_exception_logging:15","message":"Something went wrong","timestamp":"2022-01-09 20:40:28,727+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"b00ac6cf-92a8-59d4-8e22-9c9ad8c37b29","error":"Change Event malformed, validation failed","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/common/middlewares.py\\", line 12, in unhandled_exception_logging\\n    response = handler(event, context)\\n  File \\"/var/task/event_processor.py\\", line 138, in lambda_handler\\n    validate_event(change_event)\\n  File \\"/var/task/change_event_validation.py\\", line 22, in validate_event\\n    raise ValidationException(\\"Change Event malformed, validation failed\\")\\nchange_event_exceptions.ValidationException: Change Event malformed, validation failed","exception_name":"ValidationException","xray_trace_id":"1-61db483c-936468784dd81f5a7fd9f00f"}\n',
  'ingestionTime': 1641760837741
}, {
  'timestamp': 1641760828729,
  'message': '[ERROR] ValidationException: Change Event malformed, validation failed\rTraceback (most recent call last):\r\xa0\xa0File "/var/task/aws_lambda_powertools/tracing/tracer.py", line 315, in decorate\r\xa0\xa0\xa0\xa0response = lambda_handler(event, context, **kwargs)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/aws_lambda_powertools/utilities/data_classes/event_source.py", line 39, in event_source\r\xa0\xa0\xa0\xa0return handler(data_class(event), context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 23, in set_correlation_id\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/logging/logger.py", line 354, in decorate\r\xa0\xa0\xa0\xa0return lambda_handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 12, in unhandled_exception_logging\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/event_processor.py", line 138, in lambda_handler\r\xa0\xa0\xa0\xa0validate_event(change_event)\r\xa0\xa0File "/var/task/change_event_validation.py", line 22, in validate_event\r\xa0\xa0\xa0\xa0raise ValidationException("Change Event malformed, validation failed")\n',
  'ingestionTime': 1641760837741
}, {
  'timestamp': 1641760828748,
  'message': 'END RequestId: b00ac6cf-92a8-59d4-8e22-9c9ad8c37b29\n',
  'ingestionTime': 1641760837741
}, {
  'timestamp': 1641760828748,
  'message': 'REPORT RequestId: b00ac6cf-92a8-59d4-8e22-9c9ad8c37b29\tDuration: 23.49 ms\tBilled Duration: 24 ms\tMemory Size: 256 MB\tMax Memory Used: 76 MB\t\nXRAY TraceId: 1-61db483c-936468784dd81f5a7fd9f00f\tSegmentId: 586c7cda62d27904\tSampled: true\t\n',
  'ingestionTime': 1641760837741
}, {
  'timestamp': 1641760950127,
  'message': 'START RequestId: 16c9a6b1-b87f-53e8-b304-fce4f2a1a168 Version: $LATEST\n',
  'ingestionTime': 1641760959146
}, {
  'timestamp': 1641760950132,
  'message': '{"level":"INFO","location":"lambda_handler:137","message":"Attempting to validate change_event: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 20:42:30,131+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"16c9a6b1-b87f-53e8-b304-fce4f2a1a168","xray_trace_id":"1-61db48b6-01804872394722f122debdbd"}\n',
  'ingestionTime': 1641760959146
}, {
  'timestamp': 1641760950132,
  'message': '{"level":"INFO","location":"validate_event:17","message":"Attempting to validate event payload: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 20:42:30,132+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"16c9a6b1-b87f-53e8-b304-fce4f2a1a168","xray_trace_id":"1-61db48b6-01804872394722f122debdbd"}\n',
  'ingestionTime': 1641760959146
}, {
  'timestamp': 1641760950134,
  'message': '{"level":"ERROR","location":"validate_event:21","message":"Input schema validation error|Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","timestamp":"2022-01-09 20:42:30,133+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"16c9a6b1-b87f-53e8-b304-fce4f2a1a168","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","exception_name":"SchemaValidationError","xray_trace_id":"1-61db48b6-01804872394722f122debdbd"}\n',
  'ingestionTime': 1641760959146
}, {
  'timestamp': 1641760950134,
  'message': '{"level":"ERROR","location":"unhandled_exception_logging:15","message":"Something went wrong","timestamp":"2022-01-09 20:42:30,134+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"16c9a6b1-b87f-53e8-b304-fce4f2a1a168","error":"Change Event malformed, validation failed","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/common/middlewares.py\\", line 12, in unhandled_exception_logging\\n    response = handler(event, context)\\n  File \\"/var/task/event_processor.py\\", line 138, in lambda_handler\\n    validate_event(change_event)\\n  File \\"/var/task/change_event_validation.py\\", line 22, in validate_event\\n    raise ValidationException(\\"Change Event malformed, validation failed\\")\\nchange_event_exceptions.ValidationException: Change Event malformed, validation failed","exception_name":"ValidationException","xray_trace_id":"1-61db48b6-01804872394722f122debdbd"}\n',
  'ingestionTime': 1641760959146
}, {
  'timestamp': 1641760950135,
  'message': '[ERROR] ValidationException: Change Event malformed, validation failed\rTraceback (most recent call last):\r\xa0\xa0File "/var/task/aws_lambda_powertools/tracing/tracer.py", line 315, in decorate\r\xa0\xa0\xa0\xa0response = lambda_handler(event, context, **kwargs)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/aws_lambda_powertools/utilities/data_classes/event_source.py", line 39, in event_source\r\xa0\xa0\xa0\xa0return handler(data_class(event), context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 23, in set_correlation_id\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/logging/logger.py", line 354, in decorate\r\xa0\xa0\xa0\xa0return lambda_handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 12, in unhandled_exception_logging\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/event_processor.py", line 138, in lambda_handler\r\xa0\xa0\xa0\xa0validate_event(change_event)\r\xa0\xa0File "/var/task/change_event_validation.py", line 22, in validate_event\r\xa0\xa0\xa0\xa0raise ValidationException("Change Event malformed, validation failed")\n',
  'ingestionTime': 1641760959146
}, {
  'timestamp': 1641760950150,
  'message': 'END RequestId: 16c9a6b1-b87f-53e8-b304-fce4f2a1a168\n',
  'ingestionTime': 1641760959146
}, {
  'timestamp': 1641760950150,
  'message': 'REPORT RequestId: 16c9a6b1-b87f-53e8-b304-fce4f2a1a168\tDuration: 19.26 ms\tBilled Duration: 20 ms\tMemory Size: 256 MB\tMax Memory Used: 76 MB\t\nXRAY TraceId: 1-61db48b6-01804872394722f122debdbd\tSegmentId: 1c1479314c20731b\tSampled: true\t\n',
  'ingestionTime': 1641760959146
}, {
  'timestamp': 1641761070108,
  'message': 'START RequestId: c17393b6-8c0f-540c-893d-c9e3c7543d62 Version: $LATEST\n',
  'ingestionTime': 1641761079127
}, {
  'timestamp': 1641761070112,
  'message': '{"level":"INFO","location":"lambda_handler:137","message":"Attempting to validate change_event: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 20:44:30,112+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"c17393b6-8c0f-540c-893d-c9e3c7543d62","xray_trace_id":"1-61db492e-845dcd51631d3e2d82f04ea5"}\n',
  'ingestionTime': 1641761079127
}, {
  'timestamp': 1641761070112,
  'message': '{"level":"INFO","location":"validate_event:17","message":"Attempting to validate event payload: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 20:44:30,112+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"c17393b6-8c0f-540c-893d-c9e3c7543d62","xray_trace_id":"1-61db492e-845dcd51631d3e2d82f04ea5"}\n',
  'ingestionTime': 1641761079127
}, {
  'timestamp': 1641761070113,
  'message': '{"level":"ERROR","location":"validate_event:21","message":"Input schema validation error|Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","timestamp":"2022-01-09 20:44:30,113+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"c17393b6-8c0f-540c-893d-c9e3c7543d62","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","exception_name":"SchemaValidationError","xray_trace_id":"1-61db492e-845dcd51631d3e2d82f04ea5"}\n',
  'ingestionTime': 1641761079127
}, {
  'timestamp': 1641761070114,
  'message': '{"level":"ERROR","location":"unhandled_exception_logging:15","message":"Something went wrong","timestamp":"2022-01-09 20:44:30,114+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"c17393b6-8c0f-540c-893d-c9e3c7543d62","error":"Change Event malformed, validation failed","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/common/middlewares.py\\", line 12, in unhandled_exception_logging\\n    response = handler(event, context)\\n  File \\"/var/task/event_processor.py\\", line 138, in lambda_handler\\n    validate_event(change_event)\\n  File \\"/var/task/change_event_validation.py\\", line 22, in validate_event\\n    raise ValidationException(\\"Change Event malformed, validation failed\\")\\nchange_event_exceptions.ValidationException: Change Event malformed, validation failed","exception_name":"ValidationException","xray_trace_id":"1-61db492e-845dcd51631d3e2d82f04ea5"}\n',
  'ingestionTime': 1641761079127
}, {
  'timestamp': 1641761070131,
  'message': '[ERROR] ValidationException: Change Event malformed, validation failed\rTraceback (most recent call last):\r\xa0\xa0File "/var/task/aws_lambda_powertools/tracing/tracer.py", line 315, in decorate\r\xa0\xa0\xa0\xa0response = lambda_handler(event, context, **kwargs)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/aws_lambda_powertools/utilities/data_classes/event_source.py", line 39, in event_source\r\xa0\xa0\xa0\xa0return handler(data_class(event), context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 23, in set_correlation_id\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/logging/logger.py", line 354, in decorate\r\xa0\xa0\xa0\xa0return lambda_handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 12, in unhandled_exception_logging\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/event_processor.py", line 138, in lambda_handler\r\xa0\xa0\xa0\xa0validate_event(change_event)\r\xa0\xa0File "/var/task/change_event_validation.py", line 22, in validate_event\r\xa0\xa0\xa0\xa0raise ValidationException("Change Event malformed, validation failed")\n',
  'ingestionTime': 1641761079127
}, {
  'timestamp': 1641761070132,
  'message': 'END RequestId: c17393b6-8c0f-540c-893d-c9e3c7543d62\n',
  'ingestionTime': 1641761079127
}, {
  'timestamp': 1641761070132,
  'message': 'REPORT RequestId: c17393b6-8c0f-540c-893d-c9e3c7543d62\tDuration: 21.82 ms\tBilled Duration: 22 ms\tMemory Size: 256 MB\tMax Memory Used: 76 MB\t\nXRAY TraceId: 1-61db492e-845dcd51631d3e2d82f04ea5\tSegmentId: 1d81a8152f634d13\tSampled: true\t\n',
  'ingestionTime': 1641761079127
}, {
  'timestamp': 1641761189743,
  'message': 'START RequestId: 20f4cbb1-cf04-5acc-9d22-91e484d7e4f3 Version: $LATEST\n',
  'ingestionTime': 1641761198763
}, {
  'timestamp': 1641761189747,
  'message': '{"level":"INFO","location":"lambda_handler:137","message":"Attempting to validate change_event: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 20:46:29,747+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"20f4cbb1-cf04-5acc-9d22-91e484d7e4f3","xray_trace_id":"1-61db49a5-855d650720be28160ee62f99"}\n',
  'ingestionTime': 1641761198763
}, {
  'timestamp': 1641761189747,
  'message': '{"level":"INFO","location":"validate_event:17","message":"Attempting to validate event payload: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 20:46:29,747+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"20f4cbb1-cf04-5acc-9d22-91e484d7e4f3","xray_trace_id":"1-61db49a5-855d650720be28160ee62f99"}\n',
  'ingestionTime': 1641761198763
}, {
  'timestamp': 1641761189749,
  'message': '{"level":"ERROR","location":"validate_event:21","message":"Input schema validation error|Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","timestamp":"2022-01-09 20:46:29,748+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"20f4cbb1-cf04-5acc-9d22-91e484d7e4f3","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","exception_name":"SchemaValidationError","xray_trace_id":"1-61db49a5-855d650720be28160ee62f99"}\n',
  'ingestionTime': 1641761198763
}, {
  'timestamp': 1641761189749,
  'message': '{"level":"ERROR","location":"unhandled_exception_logging:15","message":"Something went wrong","timestamp":"2022-01-09 20:46:29,749+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"20f4cbb1-cf04-5acc-9d22-91e484d7e4f3","error":"Change Event malformed, validation failed","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/common/middlewares.py\\", line 12, in unhandled_exception_logging\\n    response = handler(event, context)\\n  File \\"/var/task/event_processor.py\\", line 138, in lambda_handler\\n    validate_event(change_event)\\n  File \\"/var/task/change_event_validation.py\\", line 22, in validate_event\\n    raise ValidationException(\\"Change Event malformed, validation failed\\")\\nchange_event_exceptions.ValidationException: Change Event malformed, validation failed","exception_name":"ValidationException","xray_trace_id":"1-61db49a5-855d650720be28160ee62f99"}\n',
  'ingestionTime': 1641761198763
}, {
  'timestamp': 1641761189750,
  'message': '[ERROR] ValidationException: Change Event malformed, validation failed\rTraceback (most recent call last):\r\xa0\xa0File "/var/task/aws_lambda_powertools/tracing/tracer.py", line 315, in decorate\r\xa0\xa0\xa0\xa0response = lambda_handler(event, context, **kwargs)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/aws_lambda_powertools/utilities/data_classes/event_source.py", line 39, in event_source\r\xa0\xa0\xa0\xa0return handler(data_class(event), context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 23, in set_correlation_id\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/logging/logger.py", line 354, in decorate\r\xa0\xa0\xa0\xa0return lambda_handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 12, in unhandled_exception_logging\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/event_processor.py", line 138, in lambda_handler\r\xa0\xa0\xa0\xa0validate_event(change_event)\r\xa0\xa0File "/var/task/change_event_validation.py", line 22, in validate_event\r\xa0\xa0\xa0\xa0raise ValidationException("Change Event malformed, validation failed")\n',
  'ingestionTime': 1641761198763
}, {
  'timestamp': 1641761189754,
  'message': 'END RequestId: 20f4cbb1-cf04-5acc-9d22-91e484d7e4f3\n',
  'ingestionTime': 1641761198763
}, {
  'timestamp': 1641761189754,
  'message': 'REPORT RequestId: 20f4cbb1-cf04-5acc-9d22-91e484d7e4f3\tDuration: 6.96 ms\tBilled Duration: 7 ms\tMemory Size: 256 MB\tMax Memory Used: 76 MB\t\nXRAY TraceId: 1-61db49a5-855d650720be28160ee62f99\tSegmentId: 13db516a5f41dcfb\tSampled: true\t\n',
  'ingestionTime': 1641761198763
}, {
  'timestamp': 1641761309267,
  'message': 'START RequestId: dcf32070-e0eb-5bf3-b6d7-7a25aca095cc Version: $LATEST\n',
  'ingestionTime': 1641761318292
}, {
  'timestamp': 1641761309270,
  'message': '{"level":"INFO","location":"lambda_handler:137","message":"Attempting to validate change_event: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 20:48:29,270+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"dcf32070-e0eb-5bf3-b6d7-7a25aca095cc","xray_trace_id":"1-61db4a1d-4ffb805adb08416ba3d7752a"}\n',
  'ingestionTime': 1641761318292
}, {
  'timestamp': 1641761309271,
  'message': '{"level":"INFO","location":"validate_event:17","message":"Attempting to validate event payload: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 20:48:29,270+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"dcf32070-e0eb-5bf3-b6d7-7a25aca095cc","xray_trace_id":"1-61db4a1d-4ffb805adb08416ba3d7752a"}\n',
  'ingestionTime': 1641761318292
}, {
  'timestamp': 1641761309272,
  'message': '{"level":"ERROR","location":"validate_event:21","message":"Input schema validation error|Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","timestamp":"2022-01-09 20:48:29,272+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"dcf32070-e0eb-5bf3-b6d7-7a25aca095cc","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","exception_name":"SchemaValidationError","xray_trace_id":"1-61db4a1d-4ffb805adb08416ba3d7752a"}\n',
  'ingestionTime': 1641761318292
}, {
  'timestamp': 1641761309272,
  'message': '{"level":"ERROR","location":"unhandled_exception_logging:15","message":"Something went wrong","timestamp":"2022-01-09 20:48:29,272+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"dcf32070-e0eb-5bf3-b6d7-7a25aca095cc","error":"Change Event malformed, validation failed","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/common/middlewares.py\\", line 12, in unhandled_exception_logging\\n    response = handler(event, context)\\n  File \\"/var/task/event_processor.py\\", line 138, in lambda_handler\\n    validate_event(change_event)\\n  File \\"/var/task/change_event_validation.py\\", line 22, in validate_event\\n    raise ValidationException(\\"Change Event malformed, validation failed\\")\\nchange_event_exceptions.ValidationException: Change Event malformed, validation failed","exception_name":"ValidationException","xray_trace_id":"1-61db4a1d-4ffb805adb08416ba3d7752a"}\n',
  'ingestionTime': 1641761318292
}, {
  'timestamp': 1641761309273,
  'message': '[ERROR] ValidationException: Change Event malformed, validation failed\rTraceback (most recent call last):\r\xa0\xa0File "/var/task/aws_lambda_powertools/tracing/tracer.py", line 315, in decorate\r\xa0\xa0\xa0\xa0response = lambda_handler(event, context, **kwargs)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/aws_lambda_powertools/utilities/data_classes/event_source.py", line 39, in event_source\r\xa0\xa0\xa0\xa0return handler(data_class(event), context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 23, in set_correlation_id\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/logging/logger.py", line 354, in decorate\r\xa0\xa0\xa0\xa0return lambda_handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 12, in unhandled_exception_logging\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/event_processor.py", line 138, in lambda_handler\r\xa0\xa0\xa0\xa0validate_event(change_event)\r\xa0\xa0File "/var/task/change_event_validation.py", line 22, in validate_event\r\xa0\xa0\xa0\xa0raise ValidationException("Change Event malformed, validation failed")\n',
  'ingestionTime': 1641761318292
}, {
  'timestamp': 1641761309275,
  'message': 'END RequestId: dcf32070-e0eb-5bf3-b6d7-7a25aca095cc\n',
  'ingestionTime': 1641761318292
}, {
  'timestamp': 1641761309275,
  'message': 'REPORT RequestId: dcf32070-e0eb-5bf3-b6d7-7a25aca095cc\tDuration: 5.59 ms\tBilled Duration: 6 ms\tMemory Size: 256 MB\tMax Memory Used: 77 MB\t\nXRAY TraceId: 1-61db4a1d-4ffb805adb08416ba3d7752a\tSegmentId: 6a352dc2094349c7\tSampled: true\t\n',
  'ingestionTime': 1641761318292
}, {
  'timestamp': 1641761429873,
  'message': 'START RequestId: c7ad8c12-a89e-5cb7-8d5a-d647e45d09c9 Version: $LATEST\n',
  'ingestionTime': 1641761438898
}, {
  'timestamp': 1641761429877,
  'message': '{"level":"INFO","location":"lambda_handler:137","message":"Attempting to validate change_event: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 20:50:29,877+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"c7ad8c12-a89e-5cb7-8d5a-d647e45d09c9","xray_trace_id":"1-61db4a95-561f037c0d58decb87c4f2a2"}\n',
  'ingestionTime': 1641761438898
}, {
  'timestamp': 1641761429878,
  'message': '{"level":"INFO","location":"validate_event:17","message":"Attempting to validate event payload: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 20:50:29,877+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"c7ad8c12-a89e-5cb7-8d5a-d647e45d09c9","xray_trace_id":"1-61db4a95-561f037c0d58decb87c4f2a2"}\n',
  'ingestionTime': 1641761438898
}, {
  'timestamp': 1641761429879,
  'message': '{"level":"ERROR","location":"validate_event:21","message":"Input schema validation error|Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","timestamp":"2022-01-09 20:50:29,879+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"c7ad8c12-a89e-5cb7-8d5a-d647e45d09c9","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","exception_name":"SchemaValidationError","xray_trace_id":"1-61db4a95-561f037c0d58decb87c4f2a2"}\n',
  'ingestionTime': 1641761438898
}, {
  'timestamp': 1641761429880,
  'message': '{"level":"ERROR","location":"unhandled_exception_logging:15","message":"Something went wrong","timestamp":"2022-01-09 20:50:29,879+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"c7ad8c12-a89e-5cb7-8d5a-d647e45d09c9","error":"Change Event malformed, validation failed","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/common/middlewares.py\\", line 12, in unhandled_exception_logging\\n    response = handler(event, context)\\n  File \\"/var/task/event_processor.py\\", line 138, in lambda_handler\\n    validate_event(change_event)\\n  File \\"/var/task/change_event_validation.py\\", line 22, in validate_event\\n    raise ValidationException(\\"Change Event malformed, validation failed\\")\\nchange_event_exceptions.ValidationException: Change Event malformed, validation failed","exception_name":"ValidationException","xray_trace_id":"1-61db4a95-561f037c0d58decb87c4f2a2"}\n',
  'ingestionTime': 1641761438898
}, {
  'timestamp': 1641761429899,
  'message': '[ERROR] ValidationException: Change Event malformed, validation failed\rTraceback (most recent call last):\r\xa0\xa0File "/var/task/aws_lambda_powertools/tracing/tracer.py", line 315, in decorate\r\xa0\xa0\xa0\xa0response = lambda_handler(event, context, **kwargs)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/aws_lambda_powertools/utilities/data_classes/event_source.py", line 39, in event_source\r\xa0\xa0\xa0\xa0return handler(data_class(event), context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 23, in set_correlation_id\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/logging/logger.py", line 354, in decorate\r\xa0\xa0\xa0\xa0return lambda_handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 12, in unhandled_exception_logging\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/event_processor.py", line 138, in lambda_handler\r\xa0\xa0\xa0\xa0validate_event(change_event)\r\xa0\xa0File "/var/task/change_event_validation.py", line 22, in validate_event\r\xa0\xa0\xa0\xa0raise ValidationException("Change Event malformed, validation failed")\n',
  'ingestionTime': 1641761438898
}, {
  'timestamp': 1641761429900,
  'message': 'END RequestId: c7ad8c12-a89e-5cb7-8d5a-d647e45d09c9\n',
  'ingestionTime': 1641761438898
}, {
  'timestamp': 1641761429900,
  'message': 'REPORT RequestId: c7ad8c12-a89e-5cb7-8d5a-d647e45d09c9\tDuration: 23.89 ms\tBilled Duration: 24 ms\tMemory Size: 256 MB\tMax Memory Used: 77 MB\t\nXRAY TraceId: 1-61db4a95-561f037c0d58decb87c4f2a2\tSegmentId: 25b10ce85de912fe\tSampled: true\t\n',
  'ingestionTime': 1641761438898
}, {
  'timestamp': 1641761548886,
  'message': 'START RequestId: d538f597-806a-5de8-974c-afc2cd518896 Version: $LATEST\n',
  'ingestionTime': 1641761557910
}, {
  'timestamp': 1641761548890,
  'message': '{"level":"INFO","location":"lambda_handler:137","message":"Attempting to validate change_event: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 20:52:28,890+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"d538f597-806a-5de8-974c-afc2cd518896","xray_trace_id":"1-61db4b0c-669d774921617b27823b4d3f"}\n',
  'ingestionTime': 1641761557910
}, {
  'timestamp': 1641761548890,
  'message': '{"level":"INFO","location":"validate_event:17","message":"Attempting to validate event payload: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 20:52:28,890+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"d538f597-806a-5de8-974c-afc2cd518896","xray_trace_id":"1-61db4b0c-669d774921617b27823b4d3f"}\n',
  'ingestionTime': 1641761557910
}, {
  'timestamp': 1641761548892,
  'message': '{"level":"ERROR","location":"validate_event:21","message":"Input schema validation error|Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","timestamp":"2022-01-09 20:52:28,891+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"d538f597-806a-5de8-974c-afc2cd518896","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","exception_name":"SchemaValidationError","xray_trace_id":"1-61db4b0c-669d774921617b27823b4d3f"}\n',
  'ingestionTime': 1641761557910
}, {
  'timestamp': 1641761548892,
  'message': '{"level":"ERROR","location":"unhandled_exception_logging:15","message":"Something went wrong","timestamp":"2022-01-09 20:52:28,892+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"d538f597-806a-5de8-974c-afc2cd518896","error":"Change Event malformed, validation failed","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/common/middlewares.py\\", line 12, in unhandled_exception_logging\\n    response = handler(event, context)\\n  File \\"/var/task/event_processor.py\\", line 138, in lambda_handler\\n    validate_event(change_event)\\n  File \\"/var/task/change_event_validation.py\\", line 22, in validate_event\\n    raise ValidationException(\\"Change Event malformed, validation failed\\")\\nchange_event_exceptions.ValidationException: Change Event malformed, validation failed","exception_name":"ValidationException","xray_trace_id":"1-61db4b0c-669d774921617b27823b4d3f"}\n',
  'ingestionTime': 1641761557910
}, {
  'timestamp': 1641761548893,
  'message': '[ERROR] ValidationException: Change Event malformed, validation failed\rTraceback (most recent call last):\r\xa0\xa0File "/var/task/aws_lambda_powertools/tracing/tracer.py", line 315, in decorate\r\xa0\xa0\xa0\xa0response = lambda_handler(event, context, **kwargs)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/aws_lambda_powertools/utilities/data_classes/event_source.py", line 39, in event_source\r\xa0\xa0\xa0\xa0return handler(data_class(event), context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 23, in set_correlation_id\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/logging/logger.py", line 354, in decorate\r\xa0\xa0\xa0\xa0return lambda_handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 12, in unhandled_exception_logging\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/event_processor.py", line 138, in lambda_handler\r\xa0\xa0\xa0\xa0validate_event(change_event)\r\xa0\xa0File "/var/task/change_event_validation.py", line 22, in validate_event\r\xa0\xa0\xa0\xa0raise ValidationException("Change Event malformed, validation failed")\n',
  'ingestionTime': 1641761557910
}, {
  'timestamp': 1641761548898,
  'message': 'END RequestId: d538f597-806a-5de8-974c-afc2cd518896\n',
  'ingestionTime': 1641761557910
}, {
  'timestamp': 1641761548898,
  'message': 'REPORT RequestId: d538f597-806a-5de8-974c-afc2cd518896\tDuration: 9.53 ms\tBilled Duration: 10 ms\tMemory Size: 256 MB\tMax Memory Used: 77 MB\t\nXRAY TraceId: 1-61db4b0c-669d774921617b27823b4d3f\tSegmentId: 6d1b40ca7adf1d12\tSampled: true\t\n',
  'ingestionTime': 1641761557910
}, {
  'timestamp': 1641761669298,
  'message': 'START RequestId: b9eb73c0-5ea5-53a0-b86d-29951316fd31 Version: $LATEST\n',
  'ingestionTime': 1641761678316
}, {
  'timestamp': 1641761669303,
  'message': '{"level":"INFO","location":"lambda_handler:137","message":"Attempting to validate change_event: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 20:54:29,302+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"b9eb73c0-5ea5-53a0-b86d-29951316fd31","xray_trace_id":"1-61db4b85-a6a856af3ac8291e0b755092"}\n',
  'ingestionTime': 1641761678316
}, {
  'timestamp': 1641761669303,
  'message': '{"level":"INFO","location":"validate_event:17","message":"Attempting to validate event payload: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 20:54:29,303+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"b9eb73c0-5ea5-53a0-b86d-29951316fd31","xray_trace_id":"1-61db4b85-a6a856af3ac8291e0b755092"}\n',
  'ingestionTime': 1641761678316
}, {
  'timestamp': 1641761669304,
  'message': '{"level":"ERROR","location":"validate_event:21","message":"Input schema validation error|Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","timestamp":"2022-01-09 20:54:29,304+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"b9eb73c0-5ea5-53a0-b86d-29951316fd31","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","exception_name":"SchemaValidationError","xray_trace_id":"1-61db4b85-a6a856af3ac8291e0b755092"}\n',
  'ingestionTime': 1641761678316
}, {
  'timestamp': 1641761669305,
  'message': '{"level":"ERROR","location":"unhandled_exception_logging:15","message":"Something went wrong","timestamp":"2022-01-09 20:54:29,304+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"b9eb73c0-5ea5-53a0-b86d-29951316fd31","error":"Change Event malformed, validation failed","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/common/middlewares.py\\", line 12, in unhandled_exception_logging\\n    response = handler(event, context)\\n  File \\"/var/task/event_processor.py\\", line 138, in lambda_handler\\n    validate_event(change_event)\\n  File \\"/var/task/change_event_validation.py\\", line 22, in validate_event\\n    raise ValidationException(\\"Change Event malformed, validation failed\\")\\nchange_event_exceptions.ValidationException: Change Event malformed, validation failed","exception_name":"ValidationException","xray_trace_id":"1-61db4b85-a6a856af3ac8291e0b755092"}\n',
  'ingestionTime': 1641761678316
}, {
  'timestamp': 1641761669306,
  'message': '[ERROR] ValidationException: Change Event malformed, validation failed\rTraceback (most recent call last):\r\xa0\xa0File "/var/task/aws_lambda_powertools/tracing/tracer.py", line 315, in decorate\r\xa0\xa0\xa0\xa0response = lambda_handler(event, context, **kwargs)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/aws_lambda_powertools/utilities/data_classes/event_source.py", line 39, in event_source\r\xa0\xa0\xa0\xa0return handler(data_class(event), context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 23, in set_correlation_id\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/logging/logger.py", line 354, in decorate\r\xa0\xa0\xa0\xa0return lambda_handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 12, in unhandled_exception_logging\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/event_processor.py", line 138, in lambda_handler\r\xa0\xa0\xa0\xa0validate_event(change_event)\r\xa0\xa0File "/var/task/change_event_validation.py", line 22, in validate_event\r\xa0\xa0\xa0\xa0raise ValidationException("Change Event malformed, validation failed")\n',
  'ingestionTime': 1641761678316
}, {
  'timestamp': 1641761669320,
  'message': 'END RequestId: b9eb73c0-5ea5-53a0-b86d-29951316fd31\n',
  'ingestionTime': 1641761678316
}, {
  'timestamp': 1641761669320,
  'message': 'REPORT RequestId: b9eb73c0-5ea5-53a0-b86d-29951316fd31\tDuration: 18.32 ms\tBilled Duration: 19 ms\tMemory Size: 256 MB\tMax Memory Used: 77 MB\t\nXRAY TraceId: 1-61db4b85-a6a856af3ac8291e0b755092\tSegmentId: 491185a3096eeb4f\tSampled: true\t\n',
  'ingestionTime': 1641761678316
}, {
  'timestamp': 1641761789465,
  'message': 'START RequestId: 0c4a563e-8e2c-5a7a-bc2b-0c6bc00754eb Version: $LATEST\n',
  'ingestionTime': 1641761798486
}, {
  'timestamp': 1641761789468,
  'message': '{"level":"INFO","location":"lambda_handler:137","message":"Attempting to validate change_event: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 20:56:29,468+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"0c4a563e-8e2c-5a7a-bc2b-0c6bc00754eb","xray_trace_id":"1-61db4bfd-a96ed17c540a7706ec4603ec"}\n',
  'ingestionTime': 1641761798486
}, {
  'timestamp': 1641761789468,
  'message': '{"level":"INFO","location":"validate_event:17","message":"Attempting to validate event payload: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 20:56:29,468+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"0c4a563e-8e2c-5a7a-bc2b-0c6bc00754eb","xray_trace_id":"1-61db4bfd-a96ed17c540a7706ec4603ec"}\n',
  'ingestionTime': 1641761798486
}, {
  'timestamp': 1641761789470,
  'message': '{"level":"ERROR","location":"validate_event:21","message":"Input schema validation error|Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","timestamp":"2022-01-09 20:56:29,469+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"0c4a563e-8e2c-5a7a-bc2b-0c6bc00754eb","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","exception_name":"SchemaValidationError","xray_trace_id":"1-61db4bfd-a96ed17c540a7706ec4603ec"}\n',
  'ingestionTime': 1641761798486
}, {
  'timestamp': 1641761789470,
  'message': '{"level":"ERROR","location":"unhandled_exception_logging:15","message":"Something went wrong","timestamp":"2022-01-09 20:56:29,470+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"0c4a563e-8e2c-5a7a-bc2b-0c6bc00754eb","error":"Change Event malformed, validation failed","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/common/middlewares.py\\", line 12, in unhandled_exception_logging\\n    response = handler(event, context)\\n  File \\"/var/task/event_processor.py\\", line 138, in lambda_handler\\n    validate_event(change_event)\\n  File \\"/var/task/change_event_validation.py\\", line 22, in validate_event\\n    raise ValidationException(\\"Change Event malformed, validation failed\\")\\nchange_event_exceptions.ValidationException: Change Event malformed, validation failed","exception_name":"ValidationException","xray_trace_id":"1-61db4bfd-a96ed17c540a7706ec4603ec"}\n',
  'ingestionTime': 1641761798486
}, {
  'timestamp': 1641761789471,
  'message': '[ERROR] ValidationException: Change Event malformed, validation failed\rTraceback (most recent call last):\r\xa0\xa0File "/var/task/aws_lambda_powertools/tracing/tracer.py", line 315, in decorate\r\xa0\xa0\xa0\xa0response = lambda_handler(event, context, **kwargs)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/aws_lambda_powertools/utilities/data_classes/event_source.py", line 39, in event_source\r\xa0\xa0\xa0\xa0return handler(data_class(event), context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 23, in set_correlation_id\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/logging/logger.py", line 354, in decorate\r\xa0\xa0\xa0\xa0return lambda_handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 12, in unhandled_exception_logging\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/event_processor.py", line 138, in lambda_handler\r\xa0\xa0\xa0\xa0validate_event(change_event)\r\xa0\xa0File "/var/task/change_event_validation.py", line 22, in validate_event\r\xa0\xa0\xa0\xa0raise ValidationException("Change Event malformed, validation failed")\n',
  'ingestionTime': 1641761798486
}, {
  'timestamp': 1641761789482,
  'message': 'END RequestId: 0c4a563e-8e2c-5a7a-bc2b-0c6bc00754eb\n',
  'ingestionTime': 1641761798486
}, {
  'timestamp': 1641761789482,
  'message': 'REPORT RequestId: 0c4a563e-8e2c-5a7a-bc2b-0c6bc00754eb\tDuration: 14.74 ms\tBilled Duration: 15 ms\tMemory Size: 256 MB\tMax Memory Used: 77 MB\t\nXRAY TraceId: 1-61db4bfd-a96ed17c540a7706ec4603ec\tSegmentId: 4413bd053f38025f\tSampled: true\t\n',
  'ingestionTime': 1641761798486
}, {
  'timestamp': 1641761909049,
  'message': 'START RequestId: 1b6ef321-20c3-5f78-933f-a9746e60c87f Version: $LATEST\n',
  'ingestionTime': 1641761918068
}, {
  'timestamp': 1641761909054,
  'message': '{"level":"INFO","location":"lambda_handler:137","message":"Attempting to validate change_event: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 20:58:29,053+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"1b6ef321-20c3-5f78-933f-a9746e60c87f","xray_trace_id":"1-61db4c75-ba37d969291b6fb25e7313f2"}\n',
  'ingestionTime': 1641761918068
}, {
  'timestamp': 1641761909054,
  'message': '{"level":"INFO","location":"validate_event:17","message":"Attempting to validate event payload: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 20:58:29,054+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"1b6ef321-20c3-5f78-933f-a9746e60c87f","xray_trace_id":"1-61db4c75-ba37d969291b6fb25e7313f2"}\n',
  'ingestionTime': 1641761918068
}, {
  'timestamp': 1641761909055,
  'message': '{"level":"ERROR","location":"validate_event:21","message":"Input schema validation error|Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","timestamp":"2022-01-09 20:58:29,055+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"1b6ef321-20c3-5f78-933f-a9746e60c87f","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","exception_name":"SchemaValidationError","xray_trace_id":"1-61db4c75-ba37d969291b6fb25e7313f2"}\n',
  'ingestionTime': 1641761918068
}, {
  'timestamp': 1641761909056,
  'message': '{"level":"ERROR","location":"unhandled_exception_logging:15","message":"Something went wrong","timestamp":"2022-01-09 20:58:29,055+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"1b6ef321-20c3-5f78-933f-a9746e60c87f","error":"Change Event malformed, validation failed","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/common/middlewares.py\\", line 12, in unhandled_exception_logging\\n    response = handler(event, context)\\n  File \\"/var/task/event_processor.py\\", line 138, in lambda_handler\\n    validate_event(change_event)\\n  File \\"/var/task/change_event_validation.py\\", line 22, in validate_event\\n    raise ValidationException(\\"Change Event malformed, validation failed\\")\\nchange_event_exceptions.ValidationException: Change Event malformed, validation failed","exception_name":"ValidationException","xray_trace_id":"1-61db4c75-ba37d969291b6fb25e7313f2"}\n',
  'ingestionTime': 1641761918068
}, {
  'timestamp': 1641761909057,
  'message': '[ERROR] ValidationException: Change Event malformed, validation failed\rTraceback (most recent call last):\r\xa0\xa0File "/var/task/aws_lambda_powertools/tracing/tracer.py", line 315, in decorate\r\xa0\xa0\xa0\xa0response = lambda_handler(event, context, **kwargs)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/aws_lambda_powertools/utilities/data_classes/event_source.py", line 39, in event_source\r\xa0\xa0\xa0\xa0return handler(data_class(event), context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 23, in set_correlation_id\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/logging/logger.py", line 354, in decorate\r\xa0\xa0\xa0\xa0return lambda_handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 12, in unhandled_exception_logging\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/event_processor.py", line 138, in lambda_handler\r\xa0\xa0\xa0\xa0validate_event(change_event)\r\xa0\xa0File "/var/task/change_event_validation.py", line 22, in validate_event\r\xa0\xa0\xa0\xa0raise ValidationException("Change Event malformed, validation failed")\n',
  'ingestionTime': 1641761918068
}, {
  'timestamp': 1641761909064,
  'message': 'END RequestId: 1b6ef321-20c3-5f78-933f-a9746e60c87f\n',
  'ingestionTime': 1641761918068
}, {
  'timestamp': 1641761909064,
  'message': 'REPORT RequestId: 1b6ef321-20c3-5f78-933f-a9746e60c87f\tDuration: 11.09 ms\tBilled Duration: 12 ms\tMemory Size: 256 MB\tMax Memory Used: 77 MB\t\nXRAY TraceId: 1-61db4c75-ba37d969291b6fb25e7313f2\tSegmentId: 4ed9a762549eb422\tSampled: true\t\n',
  'ingestionTime': 1641761918068
}, {
  'timestamp': 1641762028915,
  'message': 'START RequestId: 40ba45bb-232f-5826-978e-1fee6c342f21 Version: $LATEST\n',
  'ingestionTime': 1641762037939
}, {
  'timestamp': 1641762028919,
  'message': '{"level":"INFO","location":"lambda_handler:137","message":"Attempting to validate change_event: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 21:00:28,919+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"40ba45bb-232f-5826-978e-1fee6c342f21","xray_trace_id":"1-61db4cec-c0d716654572ec9afd991824"}\n',
  'ingestionTime': 1641762037939
}, {
  'timestamp': 1641762028919,
  'message': '{"level":"INFO","location":"validate_event:17","message":"Attempting to validate event payload: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 21:00:28,919+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"40ba45bb-232f-5826-978e-1fee6c342f21","xray_trace_id":"1-61db4cec-c0d716654572ec9afd991824"}\n',
  'ingestionTime': 1641762037939
}, {
  'timestamp': 1641762028921,
  'message': '{"level":"ERROR","location":"validate_event:21","message":"Input schema validation error|Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","timestamp":"2022-01-09 21:00:28,921+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"40ba45bb-232f-5826-978e-1fee6c342f21","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","exception_name":"SchemaValidationError","xray_trace_id":"1-61db4cec-c0d716654572ec9afd991824"}\n',
  'ingestionTime': 1641762037939
}, {
  'timestamp': 1641762028921,
  'message': '{"level":"ERROR","location":"unhandled_exception_logging:15","message":"Something went wrong","timestamp":"2022-01-09 21:00:28,921+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"40ba45bb-232f-5826-978e-1fee6c342f21","error":"Change Event malformed, validation failed","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/common/middlewares.py\\", line 12, in unhandled_exception_logging\\n    response = handler(event, context)\\n  File \\"/var/task/event_processor.py\\", line 138, in lambda_handler\\n    validate_event(change_event)\\n  File \\"/var/task/change_event_validation.py\\", line 22, in validate_event\\n    raise ValidationException(\\"Change Event malformed, validation failed\\")\\nchange_event_exceptions.ValidationException: Change Event malformed, validation failed","exception_name":"ValidationException","xray_trace_id":"1-61db4cec-c0d716654572ec9afd991824"}\n',
  'ingestionTime': 1641762037939
}, {
  'timestamp': 1641762028923,
  'message': '[ERROR] ValidationException: Change Event malformed, validation failed\rTraceback (most recent call last):\r\xa0\xa0File "/var/task/aws_lambda_powertools/tracing/tracer.py", line 315, in decorate\r\xa0\xa0\xa0\xa0response = lambda_handler(event, context, **kwargs)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/aws_lambda_powertools/utilities/data_classes/event_source.py", line 39, in event_source\r\xa0\xa0\xa0\xa0return handler(data_class(event), context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 23, in set_correlation_id\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/logging/logger.py", line 354, in decorate\r\xa0\xa0\xa0\xa0return lambda_handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 12, in unhandled_exception_logging\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/event_processor.py", line 138, in lambda_handler\r\xa0\xa0\xa0\xa0validate_event(change_event)\r\xa0\xa0File "/var/task/change_event_validation.py", line 22, in validate_event\r\xa0\xa0\xa0\xa0raise ValidationException("Change Event malformed, validation failed")\n',
  'ingestionTime': 1641762037939
}, {
  'timestamp': 1641762028925,
  'message': 'END RequestId: 40ba45bb-232f-5826-978e-1fee6c342f21\n',
  'ingestionTime': 1641762037939
}, {
  'timestamp': 1641762028925,
  'message': 'REPORT RequestId: 40ba45bb-232f-5826-978e-1fee6c342f21\tDuration: 7.20 ms\tBilled Duration: 8 ms\tMemory Size: 256 MB\tMax Memory Used: 77 MB\t\nXRAY TraceId: 1-61db4cec-c0d716654572ec9afd991824\tSegmentId: 2937d4ce3923616a\tSampled: true\t\n',
  'ingestionTime': 1641762037939
}, {
  'timestamp': 1641762149193,
  'message': 'START RequestId: aab007a5-e50b-5c0e-87fd-5df0aa98cd8b Version: $LATEST\n',
  'ingestionTime': 1641762158331
}, {
  'timestamp': 1641762149197,
  'message': '{"level":"INFO","location":"lambda_handler:137","message":"Attempting to validate change_event: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 21:02:29,197+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"aab007a5-e50b-5c0e-87fd-5df0aa98cd8b","xray_trace_id":"1-61db4d65-f81dd457f71e9817e873ecc8"}\n',
  'ingestionTime': 1641762158331
}, {
  'timestamp': 1641762149197,
  'message': '{"level":"INFO","location":"validate_event:17","message":"Attempting to validate event payload: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 21:02:29,197+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"aab007a5-e50b-5c0e-87fd-5df0aa98cd8b","xray_trace_id":"1-61db4d65-f81dd457f71e9817e873ecc8"}\n',
  'ingestionTime': 1641762158331
}, {
  'timestamp': 1641762149198,
  'message': '{"level":"ERROR","location":"validate_event:21","message":"Input schema validation error|Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","timestamp":"2022-01-09 21:02:29,198+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"aab007a5-e50b-5c0e-87fd-5df0aa98cd8b","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","exception_name":"SchemaValidationError","xray_trace_id":"1-61db4d65-f81dd457f71e9817e873ecc8"}\n',
  'ingestionTime': 1641762158331
}, {
  'timestamp': 1641762149199,
  'message': '{"level":"ERROR","location":"unhandled_exception_logging:15","message":"Something went wrong","timestamp":"2022-01-09 21:02:29,198+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"aab007a5-e50b-5c0e-87fd-5df0aa98cd8b","error":"Change Event malformed, validation failed","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/common/middlewares.py\\", line 12, in unhandled_exception_logging\\n    response = handler(event, context)\\n  File \\"/var/task/event_processor.py\\", line 138, in lambda_handler\\n    validate_event(change_event)\\n  File \\"/var/task/change_event_validation.py\\", line 22, in validate_event\\n    raise ValidationException(\\"Change Event malformed, validation failed\\")\\nchange_event_exceptions.ValidationException: Change Event malformed, validation failed","exception_name":"ValidationException","xray_trace_id":"1-61db4d65-f81dd457f71e9817e873ecc8"}\n',
  'ingestionTime': 1641762158331
}, {
  'timestamp': 1641762149200,
  'message': '[ERROR] ValidationException: Change Event malformed, validation failed\rTraceback (most recent call last):\r\xa0\xa0File "/var/task/aws_lambda_powertools/tracing/tracer.py", line 315, in decorate\r\xa0\xa0\xa0\xa0response = lambda_handler(event, context, **kwargs)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/aws_lambda_powertools/utilities/data_classes/event_source.py", line 39, in event_source\r\xa0\xa0\xa0\xa0return handler(data_class(event), context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 23, in set_correlation_id\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/logging/logger.py", line 354, in decorate\r\xa0\xa0\xa0\xa0return lambda_handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 12, in unhandled_exception_logging\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/event_processor.py", line 138, in lambda_handler\r\xa0\xa0\xa0\xa0validate_event(change_event)\r\xa0\xa0File "/var/task/change_event_validation.py", line 22, in validate_event\r\xa0\xa0\xa0\xa0raise ValidationException("Change Event malformed, validation failed")\n',
  'ingestionTime': 1641762158331
}, {
  'timestamp': 1641762149212,
  'message': 'END RequestId: aab007a5-e50b-5c0e-87fd-5df0aa98cd8b\n',
  'ingestionTime': 1641762158331
}, {
  'timestamp': 1641762149212,
  'message': 'REPORT RequestId: aab007a5-e50b-5c0e-87fd-5df0aa98cd8b\tDuration: 15.83 ms\tBilled Duration: 16 ms\tMemory Size: 256 MB\tMax Memory Used: 77 MB\t\nXRAY TraceId: 1-61db4d65-f81dd457f71e9817e873ecc8\tSegmentId: 617d23e434fca571\tSampled: true\t\n',
  'ingestionTime': 1641762158331
}, {
  'timestamp': 1641762269080,
  'message': 'START RequestId: 589245fe-a929-5037-b8f9-1fabf92231b2 Version: $LATEST\n',
  'ingestionTime': 1641762278101
}, {
  'timestamp': 1641762269085,
  'message': '{"level":"INFO","location":"lambda_handler:137","message":"Attempting to validate change_event: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 21:04:29,084+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"589245fe-a929-5037-b8f9-1fabf92231b2","xray_trace_id":"1-61db4ddd-17ec88f964994048d85d51b2"}\n',
  'ingestionTime': 1641762278101
}, {
  'timestamp': 1641762269085,
  'message': '{"level":"INFO","location":"validate_event:17","message":"Attempting to validate event payload: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 21:04:29,085+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"589245fe-a929-5037-b8f9-1fabf92231b2","xray_trace_id":"1-61db4ddd-17ec88f964994048d85d51b2"}\n',
  'ingestionTime': 1641762278101
}, {
  'timestamp': 1641762269086,
  'message': '{"level":"ERROR","location":"validate_event:21","message":"Input schema validation error|Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","timestamp":"2022-01-09 21:04:29,086+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"589245fe-a929-5037-b8f9-1fabf92231b2","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","exception_name":"SchemaValidationError","xray_trace_id":"1-61db4ddd-17ec88f964994048d85d51b2"}\n',
  'ingestionTime': 1641762278101
}, {
  'timestamp': 1641762269086,
  'message': '{"level":"ERROR","location":"unhandled_exception_logging:15","message":"Something went wrong","timestamp":"2022-01-09 21:04:29,086+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"589245fe-a929-5037-b8f9-1fabf92231b2","error":"Change Event malformed, validation failed","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/common/middlewares.py\\", line 12, in unhandled_exception_logging\\n    response = handler(event, context)\\n  File \\"/var/task/event_processor.py\\", line 138, in lambda_handler\\n    validate_event(change_event)\\n  File \\"/var/task/change_event_validation.py\\", line 22, in validate_event\\n    raise ValidationException(\\"Change Event malformed, validation failed\\")\\nchange_event_exceptions.ValidationException: Change Event malformed, validation failed","exception_name":"ValidationException","xray_trace_id":"1-61db4ddd-17ec88f964994048d85d51b2"}\n',
  'ingestionTime': 1641762278101
}, {
  'timestamp': 1641762269088,
  'message': '[ERROR] ValidationException: Change Event malformed, validation failed\rTraceback (most recent call last):\r\xa0\xa0File "/var/task/aws_lambda_powertools/tracing/tracer.py", line 315, in decorate\r\xa0\xa0\xa0\xa0response = lambda_handler(event, context, **kwargs)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/aws_lambda_powertools/utilities/data_classes/event_source.py", line 39, in event_source\r\xa0\xa0\xa0\xa0return handler(data_class(event), context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 23, in set_correlation_id\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/logging/logger.py", line 354, in decorate\r\xa0\xa0\xa0\xa0return lambda_handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 12, in unhandled_exception_logging\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/event_processor.py", line 138, in lambda_handler\r\xa0\xa0\xa0\xa0validate_event(change_event)\r\xa0\xa0File "/var/task/change_event_validation.py", line 22, in validate_event\r\xa0\xa0\xa0\xa0raise ValidationException("Change Event malformed, validation failed")\n',
  'ingestionTime': 1641762278101
}, {
  'timestamp': 1641762269109,
  'message': 'END RequestId: 589245fe-a929-5037-b8f9-1fabf92231b2\n',
  'ingestionTime': 1641762278101
}, {
  'timestamp': 1641762269109,
  'message': 'REPORT RequestId: 589245fe-a929-5037-b8f9-1fabf92231b2\tDuration: 25.34 ms\tBilled Duration: 26 ms\tMemory Size: 256 MB\tMax Memory Used: 77 MB\t\nXRAY TraceId: 1-61db4ddd-17ec88f964994048d85d51b2\tSegmentId: 5006fec21b331196\tSampled: true\t\n',
  'ingestionTime': 1641762278101
}, {
  'timestamp': 1641762389129,
  'message': 'START RequestId: 59187cc3-e15a-5d46-8d06-2696b1d9c385 Version: $LATEST\n',
  'ingestionTime': 1641762398156
}, {
  'timestamp': 1641762389133,
  'message': '{"level":"INFO","location":"lambda_handler:137","message":"Attempting to validate change_event: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 21:06:29,133+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"59187cc3-e15a-5d46-8d06-2696b1d9c385","xray_trace_id":"1-61db4e55-38c110c9f7c4a16225c39da5"}\n',
  'ingestionTime': 1641762398156
}, {
  'timestamp': 1641762389134,
  'message': '{"level":"INFO","location":"validate_event:17","message":"Attempting to validate event payload: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 21:06:29,133+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"59187cc3-e15a-5d46-8d06-2696b1d9c385","xray_trace_id":"1-61db4e55-38c110c9f7c4a16225c39da5"}\n',
  'ingestionTime': 1641762398156
}, {
  'timestamp': 1641762389135,
  'message': '{"level":"ERROR","location":"validate_event:21","message":"Input schema validation error|Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","timestamp":"2022-01-09 21:06:29,135+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"59187cc3-e15a-5d46-8d06-2696b1d9c385","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","exception_name":"SchemaValidationError","xray_trace_id":"1-61db4e55-38c110c9f7c4a16225c39da5"}\n',
  'ingestionTime': 1641762398156
}, {
  'timestamp': 1641762389135,
  'message': '{"level":"ERROR","location":"unhandled_exception_logging:15","message":"Something went wrong","timestamp":"2022-01-09 21:06:29,135+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"59187cc3-e15a-5d46-8d06-2696b1d9c385","error":"Change Event malformed, validation failed","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/common/middlewares.py\\", line 12, in unhandled_exception_logging\\n    response = handler(event, context)\\n  File \\"/var/task/event_processor.py\\", line 138, in lambda_handler\\n    validate_event(change_event)\\n  File \\"/var/task/change_event_validation.py\\", line 22, in validate_event\\n    raise ValidationException(\\"Change Event malformed, validation failed\\")\\nchange_event_exceptions.ValidationException: Change Event malformed, validation failed","exception_name":"ValidationException","xray_trace_id":"1-61db4e55-38c110c9f7c4a16225c39da5"}\n',
  'ingestionTime': 1641762398156
}, {
  'timestamp': 1641762389136,
  'message': '[ERROR] ValidationException: Change Event malformed, validation failed\rTraceback (most recent call last):\r\xa0\xa0File "/var/task/aws_lambda_powertools/tracing/tracer.py", line 315, in decorate\r\xa0\xa0\xa0\xa0response = lambda_handler(event, context, **kwargs)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/aws_lambda_powertools/utilities/data_classes/event_source.py", line 39, in event_source\r\xa0\xa0\xa0\xa0return handler(data_class(event), context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 23, in set_correlation_id\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/logging/logger.py", line 354, in decorate\r\xa0\xa0\xa0\xa0return lambda_handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 12, in unhandled_exception_logging\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/event_processor.py", line 138, in lambda_handler\r\xa0\xa0\xa0\xa0validate_event(change_event)\r\xa0\xa0File "/var/task/change_event_validation.py", line 22, in validate_event\r\xa0\xa0\xa0\xa0raise ValidationException("Change Event malformed, validation failed")\n',
  'ingestionTime': 1641762398156
}, {
  'timestamp': 1641762389150,
  'message': 'END RequestId: 59187cc3-e15a-5d46-8d06-2696b1d9c385\n',
  'ingestionTime': 1641762398156
}, {
  'timestamp': 1641762389150,
  'message': 'REPORT RequestId: 59187cc3-e15a-5d46-8d06-2696b1d9c385\tDuration: 17.69 ms\tBilled Duration: 18 ms\tMemory Size: 256 MB\tMax Memory Used: 77 MB\t\nXRAY TraceId: 1-61db4e55-38c110c9f7c4a16225c39da5\tSegmentId: 4e764948258a92f3\tSampled: true\t\n',
  'ingestionTime': 1641762398156
}, {
  'timestamp': 1641762509288,
  'message': 'START RequestId: 223b5394-80d3-5214-b186-09c1d028acd7 Version: $LATEST\n',
  'ingestionTime': 1641762518306
}, {
  'timestamp': 1641762509292,
  'message': '{"level":"INFO","location":"lambda_handler:137","message":"Attempting to validate change_event: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 21:08:29,292+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"223b5394-80d3-5214-b186-09c1d028acd7","xray_trace_id":"1-61db4ecd-fd8e29968042225d3cead28e"}\n',
  'ingestionTime': 1641762518306
}, {
  'timestamp': 1641762509292,
  'message': '{"level":"INFO","location":"validate_event:17","message":"Attempting to validate event payload: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 21:08:29,292+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"223b5394-80d3-5214-b186-09c1d028acd7","xray_trace_id":"1-61db4ecd-fd8e29968042225d3cead28e"}\n',
  'ingestionTime': 1641762518306
}, {
  'timestamp': 1641762509294,
  'message': '{"level":"ERROR","location":"validate_event:21","message":"Input schema validation error|Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","timestamp":"2022-01-09 21:08:29,293+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"223b5394-80d3-5214-b186-09c1d028acd7","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","exception_name":"SchemaValidationError","xray_trace_id":"1-61db4ecd-fd8e29968042225d3cead28e"}\n',
  'ingestionTime': 1641762518306
}, {
  'timestamp': 1641762509294,
  'message': '{"level":"ERROR","location":"unhandled_exception_logging:15","message":"Something went wrong","timestamp":"2022-01-09 21:08:29,294+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"223b5394-80d3-5214-b186-09c1d028acd7","error":"Change Event malformed, validation failed","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/common/middlewares.py\\", line 12, in unhandled_exception_logging\\n    response = handler(event, context)\\n  File \\"/var/task/event_processor.py\\", line 138, in lambda_handler\\n    validate_event(change_event)\\n  File \\"/var/task/change_event_validation.py\\", line 22, in validate_event\\n    raise ValidationException(\\"Change Event malformed, validation failed\\")\\nchange_event_exceptions.ValidationException: Change Event malformed, validation failed","exception_name":"ValidationException","xray_trace_id":"1-61db4ecd-fd8e29968042225d3cead28e"}\n',
  'ingestionTime': 1641762518306
}, {
  'timestamp': 1641762509312,
  'message': '[ERROR] ValidationException: Change Event malformed, validation failed\rTraceback (most recent call last):\r\xa0\xa0File "/var/task/aws_lambda_powertools/tracing/tracer.py", line 315, in decorate\r\xa0\xa0\xa0\xa0response = lambda_handler(event, context, **kwargs)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/aws_lambda_powertools/utilities/data_classes/event_source.py", line 39, in event_source\r\xa0\xa0\xa0\xa0return handler(data_class(event), context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 23, in set_correlation_id\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/logging/logger.py", line 354, in decorate\r\xa0\xa0\xa0\xa0return lambda_handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 12, in unhandled_exception_logging\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/event_processor.py", line 138, in lambda_handler\r\xa0\xa0\xa0\xa0validate_event(change_event)\r\xa0\xa0File "/var/task/change_event_validation.py", line 22, in validate_event\r\xa0\xa0\xa0\xa0raise ValidationException("Change Event malformed, validation failed")\n',
  'ingestionTime': 1641762518306
}, {
  'timestamp': 1641762509313,
  'message': 'END RequestId: 223b5394-80d3-5214-b186-09c1d028acd7\n',
  'ingestionTime': 1641762518306
}, {
  'timestamp': 1641762509313,
  'message': 'REPORT RequestId: 223b5394-80d3-5214-b186-09c1d028acd7\tDuration: 21.70 ms\tBilled Duration: 22 ms\tMemory Size: 256 MB\tMax Memory Used: 77 MB\t\nXRAY TraceId: 1-61db4ecd-fd8e29968042225d3cead28e\tSegmentId: 1942b06348e39e53\tSampled: true\t\n',
  'ingestionTime': 1641762518306
}, {
  'timestamp': 1641762629398,
  'message': 'START RequestId: 54ca1d1b-01c0-5474-b7a8-474e50b359dd Version: $LATEST\n',
  'ingestionTime': 1641762638414
}, {
  'timestamp': 1641762629402,
  'message': '{"level":"INFO","location":"lambda_handler:137","message":"Attempting to validate change_event: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 21:10:29,402+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"54ca1d1b-01c0-5474-b7a8-474e50b359dd","xray_trace_id":"1-61db4f45-bb318af2846dd7a215c432ba"}\n',
  'ingestionTime': 1641762638414
}, {
  'timestamp': 1641762629402,
  'message': '{"level":"INFO","location":"validate_event:17","message":"Attempting to validate event payload: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 21:10:29,402+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"54ca1d1b-01c0-5474-b7a8-474e50b359dd","xray_trace_id":"1-61db4f45-bb318af2846dd7a215c432ba"}\n',
  'ingestionTime': 1641762638414
}, {
  'timestamp': 1641762629404,
  'message': '{"level":"ERROR","location":"validate_event:21","message":"Input schema validation error|Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","timestamp":"2022-01-09 21:10:29,404+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"54ca1d1b-01c0-5474-b7a8-474e50b359dd","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","exception_name":"SchemaValidationError","xray_trace_id":"1-61db4f45-bb318af2846dd7a215c432ba"}\n',
  'ingestionTime': 1641762638414
}, {
  'timestamp': 1641762629404,
  'message': '{"level":"ERROR","location":"unhandled_exception_logging:15","message":"Something went wrong","timestamp":"2022-01-09 21:10:29,404+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"54ca1d1b-01c0-5474-b7a8-474e50b359dd","error":"Change Event malformed, validation failed","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/common/middlewares.py\\", line 12, in unhandled_exception_logging\\n    response = handler(event, context)\\n  File \\"/var/task/event_processor.py\\", line 138, in lambda_handler\\n    validate_event(change_event)\\n  File \\"/var/task/change_event_validation.py\\", line 22, in validate_event\\n    raise ValidationException(\\"Change Event malformed, validation failed\\")\\nchange_event_exceptions.ValidationException: Change Event malformed, validation failed","exception_name":"ValidationException","xray_trace_id":"1-61db4f45-bb318af2846dd7a215c432ba"}\n',
  'ingestionTime': 1641762638414
}, {
  'timestamp': 1641762629414,
  'message': '[ERROR] ValidationException: Change Event malformed, validation failed\rTraceback (most recent call last):\r\xa0\xa0File "/var/task/aws_lambda_powertools/tracing/tracer.py", line 315, in decorate\r\xa0\xa0\xa0\xa0response = lambda_handler(event, context, **kwargs)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/aws_lambda_powertools/utilities/data_classes/event_source.py", line 39, in event_source\r\xa0\xa0\xa0\xa0return handler(data_class(event), context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 23, in set_correlation_id\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/logging/logger.py", line 354, in decorate\r\xa0\xa0\xa0\xa0return lambda_handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 12, in unhandled_exception_logging\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/event_processor.py", line 138, in lambda_handler\r\xa0\xa0\xa0\xa0validate_event(change_event)\r\xa0\xa0File "/var/task/change_event_validation.py", line 22, in validate_event\r\xa0\xa0\xa0\xa0raise ValidationException("Change Event malformed, validation failed")\n',
  'ingestionTime': 1641762638414
}, {
  'timestamp': 1641762629415,
  'message': 'END RequestId: 54ca1d1b-01c0-5474-b7a8-474e50b359dd\n',
  'ingestionTime': 1641762638414
}, {
  'timestamp': 1641762629415,
  'message': 'REPORT RequestId: 54ca1d1b-01c0-5474-b7a8-474e50b359dd\tDuration: 14.11 ms\tBilled Duration: 15 ms\tMemory Size: 256 MB\tMax Memory Used: 78 MB\t\nXRAY TraceId: 1-61db4f45-bb318af2846dd7a215c432ba\tSegmentId: 2c98760b7b300f52\tSampled: true\t\n',
  'ingestionTime': 1641762638414
}, {
  'timestamp': 1641762749490,
  'message': 'START RequestId: 7bd9b468-ce79-520e-b42c-ee3d9f929fa7 Version: $LATEST\n',
  'ingestionTime': 1641762758509
}, {
  'timestamp': 1641762749493,
  'message': '{"level":"INFO","location":"lambda_handler:137","message":"Attempting to validate change_event: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 21:12:29,493+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"7bd9b468-ce79-520e-b42c-ee3d9f929fa7","xray_trace_id":"1-61db4fbd-67eb498d6210bb2747b467e8"}\n',
  'ingestionTime': 1641762758509
}, {
  'timestamp': 1641762749493,
  'message': '{"level":"INFO","location":"validate_event:17","message":"Attempting to validate event payload: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 21:12:29,493+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"7bd9b468-ce79-520e-b42c-ee3d9f929fa7","xray_trace_id":"1-61db4fbd-67eb498d6210bb2747b467e8"}\n',
  'ingestionTime': 1641762758509
}, {
  'timestamp': 1641762749495,
  'message': '{"level":"ERROR","location":"validate_event:21","message":"Input schema validation error|Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","timestamp":"2022-01-09 21:12:29,495+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"7bd9b468-ce79-520e-b42c-ee3d9f929fa7","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","exception_name":"SchemaValidationError","xray_trace_id":"1-61db4fbd-67eb498d6210bb2747b467e8"}\n',
  'ingestionTime': 1641762758509
}, {
  'timestamp': 1641762749495,
  'message': '{"level":"ERROR","location":"unhandled_exception_logging:15","message":"Something went wrong","timestamp":"2022-01-09 21:12:29,495+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"7bd9b468-ce79-520e-b42c-ee3d9f929fa7","error":"Change Event malformed, validation failed","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/common/middlewares.py\\", line 12, in unhandled_exception_logging\\n    response = handler(event, context)\\n  File \\"/var/task/event_processor.py\\", line 138, in lambda_handler\\n    validate_event(change_event)\\n  File \\"/var/task/change_event_validation.py\\", line 22, in validate_event\\n    raise ValidationException(\\"Change Event malformed, validation failed\\")\\nchange_event_exceptions.ValidationException: Change Event malformed, validation failed","exception_name":"ValidationException","xray_trace_id":"1-61db4fbd-67eb498d6210bb2747b467e8"}\n',
  'ingestionTime': 1641762758509
}, {
  'timestamp': 1641762749497,
  'message': '[ERROR] ValidationException: Change Event malformed, validation failed\rTraceback (most recent call last):\r\xa0\xa0File "/var/task/aws_lambda_powertools/tracing/tracer.py", line 315, in decorate\r\xa0\xa0\xa0\xa0response = lambda_handler(event, context, **kwargs)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/aws_lambda_powertools/utilities/data_classes/event_source.py", line 39, in event_source\r\xa0\xa0\xa0\xa0return handler(data_class(event), context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 23, in set_correlation_id\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/logging/logger.py", line 354, in decorate\r\xa0\xa0\xa0\xa0return lambda_handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 12, in unhandled_exception_logging\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/event_processor.py", line 138, in lambda_handler\r\xa0\xa0\xa0\xa0validate_event(change_event)\r\xa0\xa0File "/var/task/change_event_validation.py", line 22, in validate_event\r\xa0\xa0\xa0\xa0raise ValidationException("Change Event malformed, validation failed")\n',
  'ingestionTime': 1641762758509
}, {
  'timestamp': 1641762749515,
  'message': 'END RequestId: 7bd9b468-ce79-520e-b42c-ee3d9f929fa7\n',
  'ingestionTime': 1641762758509
}, {
  'timestamp': 1641762749515,
  'message': 'REPORT RequestId: 7bd9b468-ce79-520e-b42c-ee3d9f929fa7\tDuration: 22.82 ms\tBilled Duration: 23 ms\tMemory Size: 256 MB\tMax Memory Used: 78 MB\t\nXRAY TraceId: 1-61db4fbd-67eb498d6210bb2747b467e8\tSegmentId: 0c07a68c31c176e1\tSampled: true\t\n',
  'ingestionTime': 1641762758509
}, {
  'timestamp': 1641762869913,
  'message': 'START RequestId: 3730b000-61b2-5295-b757-ea5533d1bcf0 Version: $LATEST\n',
  'ingestionTime': 1641762878932
}, {
  'timestamp': 1641762869918,
  'message': '{"level":"INFO","location":"lambda_handler:137","message":"Attempting to validate change_event: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 21:14:29,918+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"3730b000-61b2-5295-b757-ea5533d1bcf0","xray_trace_id":"1-61db5035-0162a930bc966a4bc96539d9"}\n',
  'ingestionTime': 1641762878932
}, {
  'timestamp': 1641762869918,
  'message': '{"level":"INFO","location":"validate_event:17","message":"Attempting to validate event payload: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 21:14:29,918+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"3730b000-61b2-5295-b757-ea5533d1bcf0","xray_trace_id":"1-61db5035-0162a930bc966a4bc96539d9"}\n',
  'ingestionTime': 1641762878932
}, {
  'timestamp': 1641762869920,
  'message': '{"level":"ERROR","location":"validate_event:21","message":"Input schema validation error|Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","timestamp":"2022-01-09 21:14:29,919+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"3730b000-61b2-5295-b757-ea5533d1bcf0","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","exception_name":"SchemaValidationError","xray_trace_id":"1-61db5035-0162a930bc966a4bc96539d9"}\n',
  'ingestionTime': 1641762878932
}, {
  'timestamp': 1641762869920,
  'message': '{"level":"ERROR","location":"unhandled_exception_logging:15","message":"Something went wrong","timestamp":"2022-01-09 21:14:29,920+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"3730b000-61b2-5295-b757-ea5533d1bcf0","error":"Change Event malformed, validation failed","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/common/middlewares.py\\", line 12, in unhandled_exception_logging\\n    response = handler(event, context)\\n  File \\"/var/task/event_processor.py\\", line 138, in lambda_handler\\n    validate_event(change_event)\\n  File \\"/var/task/change_event_validation.py\\", line 22, in validate_event\\n    raise ValidationException(\\"Change Event malformed, validation failed\\")\\nchange_event_exceptions.ValidationException: Change Event malformed, validation failed","exception_name":"ValidationException","xray_trace_id":"1-61db5035-0162a930bc966a4bc96539d9"}\n',
  'ingestionTime': 1641762878932
}, {
  'timestamp': 1641762869921,
  'message': '[ERROR] ValidationException: Change Event malformed, validation failed\rTraceback (most recent call last):\r\xa0\xa0File "/var/task/aws_lambda_powertools/tracing/tracer.py", line 315, in decorate\r\xa0\xa0\xa0\xa0response = lambda_handler(event, context, **kwargs)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/aws_lambda_powertools/utilities/data_classes/event_source.py", line 39, in event_source\r\xa0\xa0\xa0\xa0return handler(data_class(event), context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 23, in set_correlation_id\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/logging/logger.py", line 354, in decorate\r\xa0\xa0\xa0\xa0return lambda_handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 12, in unhandled_exception_logging\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/event_processor.py", line 138, in lambda_handler\r\xa0\xa0\xa0\xa0validate_event(change_event)\r\xa0\xa0File "/var/task/change_event_validation.py", line 22, in validate_event\r\xa0\xa0\xa0\xa0raise ValidationException("Change Event malformed, validation failed")\n',
  'ingestionTime': 1641762878932
}, {
  'timestamp': 1641762869937,
  'message': 'END RequestId: 3730b000-61b2-5295-b757-ea5533d1bcf0\n',
  'ingestionTime': 1641762878932
}, {
  'timestamp': 1641762869937,
  'message': 'REPORT RequestId: 3730b000-61b2-5295-b757-ea5533d1bcf0\tDuration: 19.73 ms\tBilled Duration: 20 ms\tMemory Size: 256 MB\tMax Memory Used: 78 MB\t\nXRAY TraceId: 1-61db5035-0162a930bc966a4bc96539d9\tSegmentId: 5e267e7f4ad05f2e\tSampled: true\t\n',
  'ingestionTime': 1641762878932
}, {
  'timestamp': 1641762990058,
  'message': 'START RequestId: 54ce9650-1db6-5b17-8b7d-cc054f6df572 Version: $LATEST\n',
  'ingestionTime': 1641762999076
}, {
  'timestamp': 1641762990062,
  'message': '{"level":"INFO","location":"lambda_handler:137","message":"Attempting to validate change_event: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 21:16:30,062+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"54ce9650-1db6-5b17-8b7d-cc054f6df572","xray_trace_id":"1-61db50ae-202abce461300dbba9ac4b65"}\n',
  'ingestionTime': 1641762999076
}, {
  'timestamp': 1641762990062,
  'message': '{"level":"INFO","location":"validate_event:17","message":"Attempting to validate event payload: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 21:16:30,062+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"54ce9650-1db6-5b17-8b7d-cc054f6df572","xray_trace_id":"1-61db50ae-202abce461300dbba9ac4b65"}\n',
  'ingestionTime': 1641762999076
}, {
  'timestamp': 1641762990064,
  'message': '{"level":"ERROR","location":"validate_event:21","message":"Input schema validation error|Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","timestamp":"2022-01-09 21:16:30,063+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"54ce9650-1db6-5b17-8b7d-cc054f6df572","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","exception_name":"SchemaValidationError","xray_trace_id":"1-61db50ae-202abce461300dbba9ac4b65"}\n',
  'ingestionTime': 1641762999076
}, {
  'timestamp': 1641762990064,
  'message': '{"level":"ERROR","location":"unhandled_exception_logging:15","message":"Something went wrong","timestamp":"2022-01-09 21:16:30,064+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"54ce9650-1db6-5b17-8b7d-cc054f6df572","error":"Change Event malformed, validation failed","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/common/middlewares.py\\", line 12, in unhandled_exception_logging\\n    response = handler(event, context)\\n  File \\"/var/task/event_processor.py\\", line 138, in lambda_handler\\n    validate_event(change_event)\\n  File \\"/var/task/change_event_validation.py\\", line 22, in validate_event\\n    raise ValidationException(\\"Change Event malformed, validation failed\\")\\nchange_event_exceptions.ValidationException: Change Event malformed, validation failed","exception_name":"ValidationException","xray_trace_id":"1-61db50ae-202abce461300dbba9ac4b65"}\n',
  'ingestionTime': 1641762999076
}, {
  'timestamp': 1641762990065,
  'message': '[ERROR] ValidationException: Change Event malformed, validation failed\rTraceback (most recent call last):\r\xa0\xa0File "/var/task/aws_lambda_powertools/tracing/tracer.py", line 315, in decorate\r\xa0\xa0\xa0\xa0response = lambda_handler(event, context, **kwargs)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/aws_lambda_powertools/utilities/data_classes/event_source.py", line 39, in event_source\r\xa0\xa0\xa0\xa0return handler(data_class(event), context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 23, in set_correlation_id\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/logging/logger.py", line 354, in decorate\r\xa0\xa0\xa0\xa0return lambda_handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 12, in unhandled_exception_logging\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/event_processor.py", line 138, in lambda_handler\r\xa0\xa0\xa0\xa0validate_event(change_event)\r\xa0\xa0File "/var/task/change_event_validation.py", line 22, in validate_event\r\xa0\xa0\xa0\xa0raise ValidationException("Change Event malformed, validation failed")\n',
  'ingestionTime': 1641762999076
}, {
  'timestamp': 1641762990093,
  'message': 'END RequestId: 54ce9650-1db6-5b17-8b7d-cc054f6df572\n',
  'ingestionTime': 1641762999076
}, {
  'timestamp': 1641762990093,
  'message': 'REPORT RequestId: 54ce9650-1db6-5b17-8b7d-cc054f6df572\tDuration: 17.77 ms\tBilled Duration: 18 ms\tMemory Size: 256 MB\tMax Memory Used: 78 MB\t\nXRAY TraceId: 1-61db50ae-202abce461300dbba9ac4b65\tSegmentId: 6f8ad4011bdd89b1\tSampled: true\t\n',
  'ingestionTime': 1641762999076
}, {
  'timestamp': 1641763110158,
  'message': 'START RequestId: e3d45d64-44d2-5885-bbc1-07311786fde0 Version: $LATEST\n',
  'ingestionTime': 1641763119180
}, {
  'timestamp': 1641763110164,
  'message': '{"level":"INFO","location":"lambda_handler:137","message":"Attempting to validate change_event: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 21:18:30,161+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"e3d45d64-44d2-5885-bbc1-07311786fde0","xray_trace_id":"1-61db5126-8a583dab38bc350e063d29a8"}\n',
  'ingestionTime': 1641763119180
}, {
  'timestamp': 1641763110164,
  'message': '{"level":"INFO","location":"validate_event:17","message":"Attempting to validate event payload: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 21:18:30,161+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"e3d45d64-44d2-5885-bbc1-07311786fde0","xray_trace_id":"1-61db5126-8a583dab38bc350e063d29a8"}\n',
  'ingestionTime': 1641763119180
}, {
  'timestamp': 1641763110164,
  'message': '{"level":"ERROR","location":"validate_event:21","message":"Input schema validation error|Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","timestamp":"2022-01-09 21:18:30,162+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"e3d45d64-44d2-5885-bbc1-07311786fde0","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","exception_name":"SchemaValidationError","xray_trace_id":"1-61db5126-8a583dab38bc350e063d29a8"}\n',
  'ingestionTime': 1641763119180
}, {
  'timestamp': 1641763110164,
  'message': '{"level":"ERROR","location":"unhandled_exception_logging:15","message":"Something went wrong","timestamp":"2022-01-09 21:18:30,163+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"e3d45d64-44d2-5885-bbc1-07311786fde0","error":"Change Event malformed, validation failed","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/common/middlewares.py\\", line 12, in unhandled_exception_logging\\n    response = handler(event, context)\\n  File \\"/var/task/event_processor.py\\", line 138, in lambda_handler\\n    validate_event(change_event)\\n  File \\"/var/task/change_event_validation.py\\", line 22, in validate_event\\n    raise ValidationException(\\"Change Event malformed, validation failed\\")\\nchange_event_exceptions.ValidationException: Change Event malformed, validation failed","exception_name":"ValidationException","xray_trace_id":"1-61db5126-8a583dab38bc350e063d29a8"}\n',
  'ingestionTime': 1641763119180
}, {
  'timestamp': 1641763110181,
  'message': '[ERROR] ValidationException: Change Event malformed, validation failed\rTraceback (most recent call last):\r\xa0\xa0File "/var/task/aws_lambda_powertools/tracing/tracer.py", line 315, in decorate\r\xa0\xa0\xa0\xa0response = lambda_handler(event, context, **kwargs)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/aws_lambda_powertools/utilities/data_classes/event_source.py", line 39, in event_source\r\xa0\xa0\xa0\xa0return handler(data_class(event), context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 23, in set_correlation_id\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/logging/logger.py", line 354, in decorate\r\xa0\xa0\xa0\xa0return lambda_handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 12, in unhandled_exception_logging\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/event_processor.py", line 138, in lambda_handler\r\xa0\xa0\xa0\xa0validate_event(change_event)\r\xa0\xa0File "/var/task/change_event_validation.py", line 22, in validate_event\r\xa0\xa0\xa0\xa0raise ValidationException("Change Event malformed, validation failed")\n',
  'ingestionTime': 1641763119180
}, {
  'timestamp': 1641763110182,
  'message': 'END RequestId: e3d45d64-44d2-5885-bbc1-07311786fde0\n',
  'ingestionTime': 1641763119180
}, {
  'timestamp': 1641763110182,
  'message': 'REPORT RequestId: e3d45d64-44d2-5885-bbc1-07311786fde0\tDuration: 21.90 ms\tBilled Duration: 22 ms\tMemory Size: 256 MB\tMax Memory Used: 78 MB\t\nXRAY TraceId: 1-61db5126-8a583dab38bc350e063d29a8\tSegmentId: 5e28e0e506815574\tSampled: true\t\n',
  'ingestionTime': 1641763119180
}, {
  'timestamp': 1641763229956,
  'message': 'START RequestId: 5ebbcdbc-047b-5414-aeae-97e957b08171 Version: $LATEST\n',
  'ingestionTime': 1641763238973
}, {
  'timestamp': 1641763229960,
  'message': '{"level":"INFO","location":"lambda_handler:137","message":"Attempting to validate change_event: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 21:20:29,960+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"5ebbcdbc-047b-5414-aeae-97e957b08171","xray_trace_id":"1-61db519d-9c06438ddadf193b39e305ab"}\n',
  'ingestionTime': 1641763238973
}, {
  'timestamp': 1641763229961,
  'message': '{"level":"INFO","location":"validate_event:17","message":"Attempting to validate event payload: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 21:20:29,960+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"5ebbcdbc-047b-5414-aeae-97e957b08171","xray_trace_id":"1-61db519d-9c06438ddadf193b39e305ab"}\n',
  'ingestionTime': 1641763238973
}, {
  'timestamp': 1641763229962,
  'message': '{"level":"ERROR","location":"validate_event:21","message":"Input schema validation error|Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","timestamp":"2022-01-09 21:20:29,962+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"5ebbcdbc-047b-5414-aeae-97e957b08171","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","exception_name":"SchemaValidationError","xray_trace_id":"1-61db519d-9c06438ddadf193b39e305ab"}\n',
  'ingestionTime': 1641763238973
}, {
  'timestamp': 1641763229962,
  'message': '{"level":"ERROR","location":"unhandled_exception_logging:15","message":"Something went wrong","timestamp":"2022-01-09 21:20:29,962+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"5ebbcdbc-047b-5414-aeae-97e957b08171","error":"Change Event malformed, validation failed","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/common/middlewares.py\\", line 12, in unhandled_exception_logging\\n    response = handler(event, context)\\n  File \\"/var/task/event_processor.py\\", line 138, in lambda_handler\\n    validate_event(change_event)\\n  File \\"/var/task/change_event_validation.py\\", line 22, in validate_event\\n    raise ValidationException(\\"Change Event malformed, validation failed\\")\\nchange_event_exceptions.ValidationException: Change Event malformed, validation failed","exception_name":"ValidationException","xray_trace_id":"1-61db519d-9c06438ddadf193b39e305ab"}\n',
  'ingestionTime': 1641763238973
}, {
  'timestamp': 1641763229964,
  'message': '[ERROR] ValidationException: Change Event malformed, validation failed\rTraceback (most recent call last):\r\xa0\xa0File "/var/task/aws_lambda_powertools/tracing/tracer.py", line 315, in decorate\r\xa0\xa0\xa0\xa0response = lambda_handler(event, context, **kwargs)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/aws_lambda_powertools/utilities/data_classes/event_source.py", line 39, in event_source\r\xa0\xa0\xa0\xa0return handler(data_class(event), context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 23, in set_correlation_id\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/logging/logger.py", line 354, in decorate\r\xa0\xa0\xa0\xa0return lambda_handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 12, in unhandled_exception_logging\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/event_processor.py", line 138, in lambda_handler\r\xa0\xa0\xa0\xa0validate_event(change_event)\r\xa0\xa0File "/var/task/change_event_validation.py", line 22, in validate_event\r\xa0\xa0\xa0\xa0raise ValidationException("Change Event malformed, validation failed")\n',
  'ingestionTime': 1641763238973
}, {
  'timestamp': 1641763229981,
  'message': 'END RequestId: 5ebbcdbc-047b-5414-aeae-97e957b08171\n',
  'ingestionTime': 1641763238973
}, {
  'timestamp': 1641763229981,
  'message': 'REPORT RequestId: 5ebbcdbc-047b-5414-aeae-97e957b08171\tDuration: 5.76 ms\tBilled Duration: 6 ms\tMemory Size: 256 MB\tMax Memory Used: 78 MB\t\nXRAY TraceId: 1-61db519d-9c06438ddadf193b39e305ab\tSegmentId: 4c17b91047b07643\tSampled: true\t\n',
  'ingestionTime': 1641763238973
}, {
  'timestamp': 1641763350406,
  'message': 'START RequestId: f36d1513-29d4-5e69-90f8-4f467d9783ab Version: $LATEST\n',
  'ingestionTime': 1641763359426
}, {
  'timestamp': 1641763350410,
  'message': '{"level":"INFO","location":"lambda_handler:137","message":"Attempting to validate change_event: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 21:22:30,410+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"f36d1513-29d4-5e69-90f8-4f467d9783ab","xray_trace_id":"1-61db5216-342dd1e6fae42e70c2b9b8ac"}\n',
  'ingestionTime': 1641763359426
}, {
  'timestamp': 1641763350410,
  'message': '{"level":"INFO","location":"validate_event:17","message":"Attempting to validate event payload: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 21:22:30,410+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"f36d1513-29d4-5e69-90f8-4f467d9783ab","xray_trace_id":"1-61db5216-342dd1e6fae42e70c2b9b8ac"}\n',
  'ingestionTime': 1641763359426
}, {
  'timestamp': 1641763350412,
  'message': '{"level":"ERROR","location":"validate_event:21","message":"Input schema validation error|Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","timestamp":"2022-01-09 21:22:30,411+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"f36d1513-29d4-5e69-90f8-4f467d9783ab","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","exception_name":"SchemaValidationError","xray_trace_id":"1-61db5216-342dd1e6fae42e70c2b9b8ac"}\n',
  'ingestionTime': 1641763359426
}, {
  'timestamp': 1641763350412,
  'message': '{"level":"ERROR","location":"unhandled_exception_logging:15","message":"Something went wrong","timestamp":"2022-01-09 21:22:30,412+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"f36d1513-29d4-5e69-90f8-4f467d9783ab","error":"Change Event malformed, validation failed","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/common/middlewares.py\\", line 12, in unhandled_exception_logging\\n    response = handler(event, context)\\n  File \\"/var/task/event_processor.py\\", line 138, in lambda_handler\\n    validate_event(change_event)\\n  File \\"/var/task/change_event_validation.py\\", line 22, in validate_event\\n    raise ValidationException(\\"Change Event malformed, validation failed\\")\\nchange_event_exceptions.ValidationException: Change Event malformed, validation failed","exception_name":"ValidationException","xray_trace_id":"1-61db5216-342dd1e6fae42e70c2b9b8ac"}\n',
  'ingestionTime': 1641763359426
}, {
  'timestamp': 1641763350413,
  'message': '[ERROR] ValidationException: Change Event malformed, validation failed\rTraceback (most recent call last):\r\xa0\xa0File "/var/task/aws_lambda_powertools/tracing/tracer.py", line 315, in decorate\r\xa0\xa0\xa0\xa0response = lambda_handler(event, context, **kwargs)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/aws_lambda_powertools/utilities/data_classes/event_source.py", line 39, in event_source\r\xa0\xa0\xa0\xa0return handler(data_class(event), context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 23, in set_correlation_id\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/logging/logger.py", line 354, in decorate\r\xa0\xa0\xa0\xa0return lambda_handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 12, in unhandled_exception_logging\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/event_processor.py", line 138, in lambda_handler\r\xa0\xa0\xa0\xa0validate_event(change_event)\r\xa0\xa0File "/var/task/change_event_validation.py", line 22, in validate_event\r\xa0\xa0\xa0\xa0raise ValidationException("Change Event malformed, validation failed")\n',
  'ingestionTime': 1641763359426
}, {
  'timestamp': 1641763350424,
  'message': 'END RequestId: f36d1513-29d4-5e69-90f8-4f467d9783ab\n',
  'ingestionTime': 1641763359426
}, {
  'timestamp': 1641763350424,
  'message': 'REPORT RequestId: f36d1513-29d4-5e69-90f8-4f467d9783ab\tDuration: 14.63 ms\tBilled Duration: 15 ms\tMemory Size: 256 MB\tMax Memory Used: 79 MB\t\nXRAY TraceId: 1-61db5216-342dd1e6fae42e70c2b9b8ac\tSegmentId: 1988cbac2095ef06\tSampled: true\t\n',
  'ingestionTime': 1641763359426
}, {
  'timestamp': 1641763470032,
  'message': 'START RequestId: f3f806c5-8723-5d80-8a0b-5c90d3982042 Version: $LATEST\n',
  'ingestionTime': 1641763479055
}, {
  'timestamp': 1641763470036,
  'message': '{"level":"INFO","location":"lambda_handler:137","message":"Attempting to validate change_event: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 21:24:30,036+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"f3f806c5-8723-5d80-8a0b-5c90d3982042","xray_trace_id":"1-61db528e-c73cb499267e51d3d4cf07b1"}\n',
  'ingestionTime': 1641763479055
}, {
  'timestamp': 1641763470037,
  'message': '{"level":"INFO","location":"validate_event:17","message":"Attempting to validate event payload: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 21:24:30,036+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"f3f806c5-8723-5d80-8a0b-5c90d3982042","xray_trace_id":"1-61db528e-c73cb499267e51d3d4cf07b1"}\n',
  'ingestionTime': 1641763479055
}, {
  'timestamp': 1641763470038,
  'message': '{"level":"ERROR","location":"validate_event:21","message":"Input schema validation error|Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","timestamp":"2022-01-09 21:24:30,038+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"f3f806c5-8723-5d80-8a0b-5c90d3982042","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","exception_name":"SchemaValidationError","xray_trace_id":"1-61db528e-c73cb499267e51d3d4cf07b1"}\n',
  'ingestionTime': 1641763479055
}, {
  'timestamp': 1641763470038,
  'message': '{"level":"ERROR","location":"unhandled_exception_logging:15","message":"Something went wrong","timestamp":"2022-01-09 21:24:30,038+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"f3f806c5-8723-5d80-8a0b-5c90d3982042","error":"Change Event malformed, validation failed","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/common/middlewares.py\\", line 12, in unhandled_exception_logging\\n    response = handler(event, context)\\n  File \\"/var/task/event_processor.py\\", line 138, in lambda_handler\\n    validate_event(change_event)\\n  File \\"/var/task/change_event_validation.py\\", line 22, in validate_event\\n    raise ValidationException(\\"Change Event malformed, validation failed\\")\\nchange_event_exceptions.ValidationException: Change Event malformed, validation failed","exception_name":"ValidationException","xray_trace_id":"1-61db528e-c73cb499267e51d3d4cf07b1"}\n',
  'ingestionTime': 1641763479055
}, {
  'timestamp': 1641763470045,
  'message': '[ERROR] ValidationException: Change Event malformed, validation failed\rTraceback (most recent call last):\r\xa0\xa0File "/var/task/aws_lambda_powertools/tracing/tracer.py", line 315, in decorate\r\xa0\xa0\xa0\xa0response = lambda_handler(event, context, **kwargs)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/aws_lambda_powertools/utilities/data_classes/event_source.py", line 39, in event_source\r\xa0\xa0\xa0\xa0return handler(data_class(event), context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 23, in set_correlation_id\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/logging/logger.py", line 354, in decorate\r\xa0\xa0\xa0\xa0return lambda_handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 12, in unhandled_exception_logging\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/event_processor.py", line 138, in lambda_handler\r\xa0\xa0\xa0\xa0validate_event(change_event)\r\xa0\xa0File "/var/task/change_event_validation.py", line 22, in validate_event\r\xa0\xa0\xa0\xa0raise ValidationException("Change Event malformed, validation failed")\n',
  'ingestionTime': 1641763479055
}, {
  'timestamp': 1641763470046,
  'message': 'END RequestId: f3f806c5-8723-5d80-8a0b-5c90d3982042\n',
  'ingestionTime': 1641763479055
}, {
  'timestamp': 1641763470046,
  'message': 'REPORT RequestId: f3f806c5-8723-5d80-8a0b-5c90d3982042\tDuration: 10.67 ms\tBilled Duration: 11 ms\tMemory Size: 256 MB\tMax Memory Used: 79 MB\t\nXRAY TraceId: 1-61db528e-c73cb499267e51d3d4cf07b1\tSegmentId: 749f48865af74827\tSampled: true\t\n',
  'ingestionTime': 1641763479055
}, {
  'timestamp': 1641763589704,
  'message': 'START RequestId: 776a056b-6f94-507c-a71a-5f3e3aa0c463 Version: $LATEST\n',
  'ingestionTime': 1641763598726
}, {
  'timestamp': 1641763589707,
  'message': '{"level":"INFO","location":"lambda_handler:137","message":"Attempting to validate change_event: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 21:26:29,707+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"776a056b-6f94-507c-a71a-5f3e3aa0c463","xray_trace_id":"1-61db5305-b667aab39ced4ce5dd2e7182"}\n',
  'ingestionTime': 1641763598726
}, {
  'timestamp': 1641763589707,
  'message': '{"level":"INFO","location":"validate_event:17","message":"Attempting to validate event payload: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 21:26:29,707+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"776a056b-6f94-507c-a71a-5f3e3aa0c463","xray_trace_id":"1-61db5305-b667aab39ced4ce5dd2e7182"}\n',
  'ingestionTime': 1641763598726
}, {
  'timestamp': 1641763589709,
  'message': '{"level":"ERROR","location":"validate_event:21","message":"Input schema validation error|Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","timestamp":"2022-01-09 21:26:29,709+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"776a056b-6f94-507c-a71a-5f3e3aa0c463","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","exception_name":"SchemaValidationError","xray_trace_id":"1-61db5305-b667aab39ced4ce5dd2e7182"}\n',
  'ingestionTime': 1641763598726
}, {
  'timestamp': 1641763589709,
  'message': '{"level":"ERROR","location":"unhandled_exception_logging:15","message":"Something went wrong","timestamp":"2022-01-09 21:26:29,709+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"776a056b-6f94-507c-a71a-5f3e3aa0c463","error":"Change Event malformed, validation failed","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/common/middlewares.py\\", line 12, in unhandled_exception_logging\\n    response = handler(event, context)\\n  File \\"/var/task/event_processor.py\\", line 138, in lambda_handler\\n    validate_event(change_event)\\n  File \\"/var/task/change_event_validation.py\\", line 22, in validate_event\\n    raise ValidationException(\\"Change Event malformed, validation failed\\")\\nchange_event_exceptions.ValidationException: Change Event malformed, validation failed","exception_name":"ValidationException","xray_trace_id":"1-61db5305-b667aab39ced4ce5dd2e7182"}\n',
  'ingestionTime': 1641763598726
}, {
  'timestamp': 1641763589727,
  'message': '[ERROR] ValidationException: Change Event malformed, validation failed\rTraceback (most recent call last):\r\xa0\xa0File "/var/task/aws_lambda_powertools/tracing/tracer.py", line 315, in decorate\r\xa0\xa0\xa0\xa0response = lambda_handler(event, context, **kwargs)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/aws_lambda_powertools/utilities/data_classes/event_source.py", line 39, in event_source\r\xa0\xa0\xa0\xa0return handler(data_class(event), context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 23, in set_correlation_id\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/logging/logger.py", line 354, in decorate\r\xa0\xa0\xa0\xa0return lambda_handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 12, in unhandled_exception_logging\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/event_processor.py", line 138, in lambda_handler\r\xa0\xa0\xa0\xa0validate_event(change_event)\r\xa0\xa0File "/var/task/change_event_validation.py", line 22, in validate_event\r\xa0\xa0\xa0\xa0raise ValidationException("Change Event malformed, validation failed")\n',
  'ingestionTime': 1641763598726
}, {
  'timestamp': 1641763589728,
  'message': 'END RequestId: 776a056b-6f94-507c-a71a-5f3e3aa0c463\n',
  'ingestionTime': 1641763598726
}, {
  'timestamp': 1641763589728,
  'message': 'REPORT RequestId: 776a056b-6f94-507c-a71a-5f3e3aa0c463\tDuration: 21.55 ms\tBilled Duration: 22 ms\tMemory Size: 256 MB\tMax Memory Used: 79 MB\t\nXRAY TraceId: 1-61db5305-b667aab39ced4ce5dd2e7182\tSegmentId: 732fbc314af2f705\tSampled: true\t\n',
  'ingestionTime': 1641763598726
}, {
  'timestamp': 1641763709628,
  'message': 'START RequestId: ca7159b7-98b9-5eaa-802f-03e2cd124ab5 Version: $LATEST\n',
  'ingestionTime': 1641763718647
}, {
  'timestamp': 1641763709631,
  'message': '{"level":"INFO","location":"lambda_handler:137","message":"Attempting to validate change_event: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 21:28:29,631+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"ca7159b7-98b9-5eaa-802f-03e2cd124ab5","xray_trace_id":"1-61db537d-745d657eac78732ab4f36034"}\n',
  'ingestionTime': 1641763718647
}, {
  'timestamp': 1641763709631,
  'message': '{"level":"INFO","location":"validate_event:17","message":"Attempting to validate event payload: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 21:28:29,631+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"ca7159b7-98b9-5eaa-802f-03e2cd124ab5","xray_trace_id":"1-61db537d-745d657eac78732ab4f36034"}\n',
  'ingestionTime': 1641763718647
}, {
  'timestamp': 1641763709633,
  'message': '{"level":"ERROR","location":"validate_event:21","message":"Input schema validation error|Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","timestamp":"2022-01-09 21:28:29,632+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"ca7159b7-98b9-5eaa-802f-03e2cd124ab5","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","exception_name":"SchemaValidationError","xray_trace_id":"1-61db537d-745d657eac78732ab4f36034"}\n',
  'ingestionTime': 1641763718647
}, {
  'timestamp': 1641763709633,
  'message': '{"level":"ERROR","location":"unhandled_exception_logging:15","message":"Something went wrong","timestamp":"2022-01-09 21:28:29,633+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"ca7159b7-98b9-5eaa-802f-03e2cd124ab5","error":"Change Event malformed, validation failed","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/common/middlewares.py\\", line 12, in unhandled_exception_logging\\n    response = handler(event, context)\\n  File \\"/var/task/event_processor.py\\", line 138, in lambda_handler\\n    validate_event(change_event)\\n  File \\"/var/task/change_event_validation.py\\", line 22, in validate_event\\n    raise ValidationException(\\"Change Event malformed, validation failed\\")\\nchange_event_exceptions.ValidationException: Change Event malformed, validation failed","exception_name":"ValidationException","xray_trace_id":"1-61db537d-745d657eac78732ab4f36034"}\n',
  'ingestionTime': 1641763718647
}, {
  'timestamp': 1641763709648,
  'message': '[ERROR] ValidationException: Change Event malformed, validation failed\rTraceback (most recent call last):\r\xa0\xa0File "/var/task/aws_lambda_powertools/tracing/tracer.py", line 315, in decorate\r\xa0\xa0\xa0\xa0response = lambda_handler(event, context, **kwargs)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/aws_lambda_powertools/utilities/data_classes/event_source.py", line 39, in event_source\r\xa0\xa0\xa0\xa0return handler(data_class(event), context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 23, in set_correlation_id\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/logging/logger.py", line 354, in decorate\r\xa0\xa0\xa0\xa0return lambda_handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 12, in unhandled_exception_logging\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/event_processor.py", line 138, in lambda_handler\r\xa0\xa0\xa0\xa0validate_event(change_event)\r\xa0\xa0File "/var/task/change_event_validation.py", line 22, in validate_event\r\xa0\xa0\xa0\xa0raise ValidationException("Change Event malformed, validation failed")\n',
  'ingestionTime': 1641763718647
}, {
  'timestamp': 1641763709649,
  'message': 'END RequestId: ca7159b7-98b9-5eaa-802f-03e2cd124ab5\n',
  'ingestionTime': 1641763718647
}, {
  'timestamp': 1641763709649,
  'message': 'REPORT RequestId: ca7159b7-98b9-5eaa-802f-03e2cd124ab5\tDuration: 19.43 ms\tBilled Duration: 20 ms\tMemory Size: 256 MB\tMax Memory Used: 79 MB\t\nXRAY TraceId: 1-61db537d-745d657eac78732ab4f36034\tSegmentId: 26c1270911a62dac\tSampled: true\t\n',
  'ingestionTime': 1641763718647
}, {
  'timestamp': 1641763829205,
  'message': 'START RequestId: 9e3460ab-a206-5d55-bc45-3afef42527d0 Version: $LATEST\n',
  'ingestionTime': 1641763838227
}, {
  'timestamp': 1641763829209,
  'message': '{"level":"INFO","location":"lambda_handler:137","message":"Attempting to validate change_event: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 21:30:29,209+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"9e3460ab-a206-5d55-bc45-3afef42527d0","xray_trace_id":"1-61db53f5-10683786aae34e4a4e8cc8b6"}\n',
  'ingestionTime': 1641763838227
}, {
  'timestamp': 1641763829209,
  'message': '{"level":"INFO","location":"validate_event:17","message":"Attempting to validate event payload: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 21:30:29,209+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"9e3460ab-a206-5d55-bc45-3afef42527d0","xray_trace_id":"1-61db53f5-10683786aae34e4a4e8cc8b6"}\n',
  'ingestionTime': 1641763838227
}, {
  'timestamp': 1641763829211,
  'message': '{"level":"ERROR","location":"validate_event:21","message":"Input schema validation error|Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","timestamp":"2022-01-09 21:30:29,210+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"9e3460ab-a206-5d55-bc45-3afef42527d0","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","exception_name":"SchemaValidationError","xray_trace_id":"1-61db53f5-10683786aae34e4a4e8cc8b6"}\n',
  'ingestionTime': 1641763838227
}, {
  'timestamp': 1641763829211,
  'message': '{"level":"ERROR","location":"unhandled_exception_logging:15","message":"Something went wrong","timestamp":"2022-01-09 21:30:29,211+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"9e3460ab-a206-5d55-bc45-3afef42527d0","error":"Change Event malformed, validation failed","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/common/middlewares.py\\", line 12, in unhandled_exception_logging\\n    response = handler(event, context)\\n  File \\"/var/task/event_processor.py\\", line 138, in lambda_handler\\n    validate_event(change_event)\\n  File \\"/var/task/change_event_validation.py\\", line 22, in validate_event\\n    raise ValidationException(\\"Change Event malformed, validation failed\\")\\nchange_event_exceptions.ValidationException: Change Event malformed, validation failed","exception_name":"ValidationException","xray_trace_id":"1-61db53f5-10683786aae34e4a4e8cc8b6"}\n',
  'ingestionTime': 1641763838227
}, {
  'timestamp': 1641763829212,
  'message': '[ERROR] ValidationException: Change Event malformed, validation failed\rTraceback (most recent call last):\r\xa0\xa0File "/var/task/aws_lambda_powertools/tracing/tracer.py", line 315, in decorate\r\xa0\xa0\xa0\xa0response = lambda_handler(event, context, **kwargs)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/aws_lambda_powertools/utilities/data_classes/event_source.py", line 39, in event_source\r\xa0\xa0\xa0\xa0return handler(data_class(event), context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 23, in set_correlation_id\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/logging/logger.py", line 354, in decorate\r\xa0\xa0\xa0\xa0return lambda_handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 12, in unhandled_exception_logging\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/event_processor.py", line 138, in lambda_handler\r\xa0\xa0\xa0\xa0validate_event(change_event)\r\xa0\xa0File "/var/task/change_event_validation.py", line 22, in validate_event\r\xa0\xa0\xa0\xa0raise ValidationException("Change Event malformed, validation failed")\n',
  'ingestionTime': 1641763838227
}, {
  'timestamp': 1641763829231,
  'message': 'END RequestId: 9e3460ab-a206-5d55-bc45-3afef42527d0\n',
  'ingestionTime': 1641763838227
}, {
  'timestamp': 1641763829231,
  'message': 'REPORT RequestId: 9e3460ab-a206-5d55-bc45-3afef42527d0\tDuration: 22.48 ms\tBilled Duration: 23 ms\tMemory Size: 256 MB\tMax Memory Used: 79 MB\t\nXRAY TraceId: 1-61db53f5-10683786aae34e4a4e8cc8b6\tSegmentId: 7d008f8d62aea90f\tSampled: true\t\n',
  'ingestionTime': 1641763838227
}, {
  'timestamp': 1641763949953,
  'message': 'START RequestId: 005594f1-6fae-5ca1-9661-cea439357624 Version: $LATEST\n',
  'ingestionTime': 1641763958974
}, {
  'timestamp': 1641763949957,
  'message': '{"level":"INFO","location":"lambda_handler:137","message":"Attempting to validate change_event: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 21:32:29,957+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"005594f1-6fae-5ca1-9661-cea439357624","xray_trace_id":"1-61db546d-ff062b701a8e3a82be2db158"}\n',
  'ingestionTime': 1641763958974
}, {
  'timestamp': 1641763949958,
  'message': '{"level":"INFO","location":"validate_event:17","message":"Attempting to validate event payload: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 21:32:29,957+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"005594f1-6fae-5ca1-9661-cea439357624","xray_trace_id":"1-61db546d-ff062b701a8e3a82be2db158"}\n',
  'ingestionTime': 1641763958974
}, {
  'timestamp': 1641763949959,
  'message': '{"level":"ERROR","location":"validate_event:21","message":"Input schema validation error|Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","timestamp":"2022-01-09 21:32:29,959+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"005594f1-6fae-5ca1-9661-cea439357624","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","exception_name":"SchemaValidationError","xray_trace_id":"1-61db546d-ff062b701a8e3a82be2db158"}\n',
  'ingestionTime': 1641763958974
}, {
  'timestamp': 1641763949959,
  'message': '{"level":"ERROR","location":"unhandled_exception_logging:15","message":"Something went wrong","timestamp":"2022-01-09 21:32:29,959+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"005594f1-6fae-5ca1-9661-cea439357624","error":"Change Event malformed, validation failed","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/common/middlewares.py\\", line 12, in unhandled_exception_logging\\n    response = handler(event, context)\\n  File \\"/var/task/event_processor.py\\", line 138, in lambda_handler\\n    validate_event(change_event)\\n  File \\"/var/task/change_event_validation.py\\", line 22, in validate_event\\n    raise ValidationException(\\"Change Event malformed, validation failed\\")\\nchange_event_exceptions.ValidationException: Change Event malformed, validation failed","exception_name":"ValidationException","xray_trace_id":"1-61db546d-ff062b701a8e3a82be2db158"}\n',
  'ingestionTime': 1641763958974
}, {
  'timestamp': 1641763949971,
  'message': '[ERROR] ValidationException: Change Event malformed, validation failed\rTraceback (most recent call last):\r\xa0\xa0File "/var/task/aws_lambda_powertools/tracing/tracer.py", line 315, in decorate\r\xa0\xa0\xa0\xa0response = lambda_handler(event, context, **kwargs)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/aws_lambda_powertools/utilities/data_classes/event_source.py", line 39, in event_source\r\xa0\xa0\xa0\xa0return handler(data_class(event), context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 23, in set_correlation_id\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/logging/logger.py", line 354, in decorate\r\xa0\xa0\xa0\xa0return lambda_handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 12, in unhandled_exception_logging\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/event_processor.py", line 138, in lambda_handler\r\xa0\xa0\xa0\xa0validate_event(change_event)\r\xa0\xa0File "/var/task/change_event_validation.py", line 22, in validate_event\r\xa0\xa0\xa0\xa0raise ValidationException("Change Event malformed, validation failed")\n',
  'ingestionTime': 1641763958974
}, {
  'timestamp': 1641763949972,
  'message': 'END RequestId: 005594f1-6fae-5ca1-9661-cea439357624\n',
  'ingestionTime': 1641763958974
}, {
  'timestamp': 1641763949972,
  'message': 'REPORT RequestId: 005594f1-6fae-5ca1-9661-cea439357624\tDuration: 15.95 ms\tBilled Duration: 16 ms\tMemory Size: 256 MB\tMax Memory Used: 80 MB\t\nXRAY TraceId: 1-61db546d-ff062b701a8e3a82be2db158\tSegmentId: 6d6bd9893e06cc92\tSampled: true\t\n',
  'ingestionTime': 1641763958974
}, {
  'timestamp': 1641764069704,
  'message': 'START RequestId: 4dc718d6-12fe-558e-aada-428345edc346 Version: $LATEST\n',
  'ingestionTime': 1641764078721
}, {
  'timestamp': 1641764069708,
  'message': '{"level":"INFO","location":"lambda_handler:137","message":"Attempting to validate change_event: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 21:34:29,708+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"4dc718d6-12fe-558e-aada-428345edc346","xray_trace_id":"1-61db54e5-3bb9c52d207c5eb150c2b490"}\n',
  'ingestionTime': 1641764078721
}, {
  'timestamp': 1641764069709,
  'message': '{"level":"INFO","location":"validate_event:17","message":"Attempting to validate event payload: {\'SearchKey\': \'ANEI1245\', \'ODSCode\': \'FAT91\', \'OrganisationName\': None, \'OrganisationTypeId\': \'PHA\', \'OrganisationType\': \'Pharmacy\', \'OrganisationStatus\': \'Visible\', \'SummaryText\': \'\', \'URL\': \'https://my-pharmacy.com/\', \'Address1\': \'501-503 MANSFIELD ROAD, NOTTINGHAM\', \'Address2\': None, \'Address3\': None, \'City\': None, \'County\': None, \'Latitude\': 53.38030624389648, \'Longitude\': -1.4826949834823608, \'Postcode\': \'NG5 2JJ\', \'ParentOrganisation\': {\'ODSCode\': \'QOP\', \'OrganisationName\': \'Greater Manchester Health and Social Care Partnership (STP)\'}, \'Email\': \'health.my-pharmacy@nhs.net\', \'Contacts\': [{\'ContactType\': \'Primary\', \'ContactAvailabilityType\': \'Office hours\', \'ContactMethodType\': \'Telephone\', \'ContactValue\': \'0115 9606272\'}], \'OrganisationSubType\': None, \'OrganisationAliases\': [], \'OpeningTimes\': [{\'Weekday\': \'Monday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Tuesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Wednesday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Thursday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Friday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Saturday\', \'Times\': \'07:30-23:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}, {\'Weekday\': \'Sunday\', \'Times\': \'10:00-17:00\', \'OffsetOpeningTime\': 540, \'OffsetClosingTime\': 780, \'OpeningTimeType\': \'General\', \'AdditionalOpeningDate\': \'\', \'IsOpen\': True}]}","timestamp":"2022-01-09 21:34:29,708+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"4dc718d6-12fe-558e-aada-428345edc346","xray_trace_id":"1-61db54e5-3bb9c52d207c5eb150c2b490"}\n',
  'ingestionTime': 1641764078721
}, {
  'timestamp': 1641764069710,
  'message': '{"level":"ERROR","location":"validate_event:21","message":"Input schema validation error|Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","timestamp":"2022-01-09 21:34:29,710+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"4dc718d6-12fe-558e-aada-428345edc346","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None","exception_name":"SchemaValidationError","xray_trace_id":"1-61db54e5-3bb9c52d207c5eb150c2b490"}\n',
  'ingestionTime': 1641764078721
}, {
  'timestamp': 1641764069710,
  'message': '{"level":"ERROR","location":"unhandled_exception_logging:15","message":"Something went wrong","timestamp":"2022-01-09 21:34:29,710+0000","service":"uec-dos-integration-di-69","correlation_id":"6d7419db-8168-4acd-a865-7e512d710106","cold_start":false,"function_name":"uec-dos-int-di-69-event-processor","function_memory_size":"256","function_arn":"arn:aws:lambda:eu-west-2:730319765130:function:uec-dos-int-di-69-event-processor","function_request_id":"4dc718d6-12fe-558e-aada-428345edc346","error":"Change Event malformed, validation failed","exception":"Traceback (most recent call last):\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 32, in validate_data_against_schema\\n    fastjsonschema.validate(definition=schema, data=data, formats=formats)\\n  File \\"/var/task/fastjsonschema/__init__.py\\", line 114, in validate\\n    return compile(definition, handlers, formats, use_default)(data)\\n  File \\"<string>\\", line 26, in validate\\nfastjsonschema.exceptions.JsonSchemaValueException: data.OrganisationSubType must be string\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/change_event_validation.py\\", line 19, in validate_event\\n    validate(event=event, schema=INPUT_SCHEMA)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/validator.py\\", line 227, in validate\\n    validate_data_against_schema(data=event, schema=schema, formats=formats)\\n  File \\"/var/task/aws_lambda_powertools/utilities/validation/base.py\\", line 37, in validate_data_against_schema\\n    raise SchemaValidationError(\\naws_lambda_powertools.utilities.validation.exceptions.SchemaValidationError: Failed schema validation. Error: data.OrganisationSubType must be string, Path: [\'data\', \'OrganisationSubType\'], Data: None\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/task/common/middlewares.py\\", line 12, in unhandled_exception_logging\\n    response = handler(event, context)\\n  File \\"/var/task/event_processor.py\\", line 138, in lambda_handler\\n    validate_event(change_event)\\n  File \\"/var/task/change_event_validation.py\\", line 22, in validate_event\\n    raise ValidationException(\\"Change Event malformed, validation failed\\")\\nchange_event_exceptions.ValidationException: Change Event malformed, validation failed","exception_name":"ValidationException","xray_trace_id":"1-61db54e5-3bb9c52d207c5eb150c2b490"}\n',
  'ingestionTime': 1641764078721
}, {
  'timestamp': 1641764069712,
  'message': '[ERROR] ValidationException: Change Event malformed, validation failed\rTraceback (most recent call last):\r\xa0\xa0File "/var/task/aws_lambda_powertools/tracing/tracer.py", line 315, in decorate\r\xa0\xa0\xa0\xa0response = lambda_handler(event, context, **kwargs)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/aws_lambda_powertools/utilities/data_classes/event_source.py", line 39, in event_source\r\xa0\xa0\xa0\xa0return handler(data_class(event), context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 23, in set_correlation_id\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/logging/logger.py", line 354, in decorate\r\xa0\xa0\xa0\xa0return lambda_handler(event, context)\r\xa0\xa0File "/var/task/aws_lambda_powertools/middleware_factory/factory.py", line 131, in wrapper\r\xa0\xa0\xa0\xa0response = middleware()\r\xa0\xa0File "/var/task/common/middlewares.py", line 12, in unhandled_exception_logging\r\xa0\xa0\xa0\xa0response = handler(event, context)\r\xa0\xa0File "/var/task/event_processor.py", line 138, in lambda_handler\r\xa0\xa0\xa0\xa0validate_event(change_event)\r\xa0\xa0File "/var/task/change_event_validation.py", line 22, in validate_event\r\xa0\xa0\xa0\xa0raise ValidationException("Change Event malformed, validation failed")\n',
  'ingestionTime': 1641764078721
}, {
  'timestamp': 1641764069714,
  'message': 'END RequestId: 4dc718d6-12fe-558e-aada-428345edc346\n',
  'ingestionTime': 1641764078721
}, {
  'timestamp': 1641764069714,
  'message': 'REPORT RequestId: 4dc718d6-12fe-558e-aada-428345edc346\tDuration: 6.28 ms\tBilled Duration: 7 ms\tMemory Size: 256 MB\tMax Memory Used: 80 MB\t\nXRAY TraceId: 1
